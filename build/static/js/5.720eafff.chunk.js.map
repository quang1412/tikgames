{"version":3,"sources":["games/wheelOfFortune/style.module.css","games/wheelOfFortune/index.jsx","components/connectCard.jsx","App.js"],"names":["module","exports","defaultSettings","tiktokId","commentKey","follower","friend","giftCount","giftName","joinEvent","maxPlayer","unfollower","winnerShowDuration","window","wheelSoundTrigger","console","log","WheelBackground","useState","index","setindex","useEffect","i","setTimeout","clearTimeout","className","style","wheelBg","backgroundImage","Wheel","props","players","keys","Object","segments","length","map","uniqueId","player","id","text","name","nickname","fillStyle","textFillStyle","image","profilePictureUrl","wheel","Winwheel","numSegments","responsive","innerRadius","size","outerRadius","centerY","centerX","textFontSize","lineWidth","animation","type","easing","duration","spins","soundTrigger","callbackFinished","pins","number","rotationAngle","draw","createWheel","stopAnimation","e","wheelCanvas","width","height","Winner","info","isShow","setShow","marginTop","onAnimationEnd","target","classList","remove","add","removeEventListener","addEventListener","textShadow","alt","src","onError","imageOnError","TutorialCard","settings","playerCount","show","O","key","push","fontSize","join","JoinedPlayer","container","document","getElementById","handleAnimationEnd","onanimationend","lastPlayer","values","pop","createElement","imageUrlFixing","defaultAvatar","setAttribute","marginLeft","randomInt","appendChild","memo","event","setting_1","updateSettings","setPlayers","canJoin","setCanjoin","winner","setWinner","isSpining","setIsSpining","validFollowrRole","0","1","2","followRole","resetWheel","current","valid","comment","includes","giftType","repeatCount","repeatEnd","Math","floor","random","startAnimation","wheelFinished","winningSegment","getIndicatedSegment","warn","zIndex","InputCard","socket","isLoading","setLoading","tiktokIdRef","useRef","btnRef","focus","on","toast","success","error","removeAttribute","reason","off","ref","placeholder","defaultValue","localStorage","lastTiktokId","onClick","value","emit","setItem","fas","icon","io","path","JSON","stringify","LoadingPage","SettingsCard","update","handleChange","checked","min","parseInt","int","float","parseFloat","max","md","lg","label","defaultChecked","onChange","step","onInput","App","connected","isConnected","setIsConnected","updateEvent","parse","widgetControl","action","data","saveDelay","href","marginBottom","overflow","textOverflow","whiteSpace","location","origin","paddingBottom","color"],"mappings":"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","file":"static/js/5.720eafff.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"html\":\"style_html__xRU5M\",\"App\":\"style_App__318US\",\"gameScreen\":\"style_gameScreen__14i96\",\"wheel\":\"style_wheel__17HAv\",\"header\":\"style_header__2tiKQ\",\"info\":\"style_info__1Cjzb\",\"wheelContainer\":\"style_wheelContainer__3YLa_\",\"wheelBg\":\"style_wheelBg__3-dAe\",\"wheelCanvas\":\"style_wheelCanvas__2rjVB\",\"actions\":\"style_actions__ZkXv3\",\"modal\":\"style_modal__2xGNW\"};","import React, { useEffect, useState, memo } from \"react\"\n// import { useOutletContext } from \"react-router-dom\"\nimport style from \"./style.module.css\"\nimport Winwheel from \"winwheel\"\n\nconst size = 400\nconst defaultSettings = {\n  tiktokId: \"\",\n  commentKey: \"JOIN\",\n  follower: true,\n  friend: true,\n  giftCount: 1,\n  giftName: \"rose\",\n  joinEvent: \"chat\",\n  maxPlayer: 100,\n  unfollower: true,\n  winnerShowDuration: 10,\n}\n\nwindow.wheelSoundTrigger = () => console.log(\"play sound\")\n\nconst WheelBackground = () => {\n  const [index, setindex] = useState(0)\n\n  useEffect(() => {\n    const i = setTimeout(() => setindex(1 - index), 1000)\n    return () => clearTimeout(i)\n  }, [index])\n\n  return (\n    <>\n      <div\n        className={style.wheelBg + (index ? \" d-none\" : \"\")}\n        style={{\n          backgroundImage: `url('/assets/images/wheel-of-fortune-bg-1.webp')`,\n        }}\n      ></div>\n      <div\n        className={style.wheelBg + (!index ? \" d-none\" : \"\")}\n        style={{\n          backgroundImage: `url('/assets/images/wheel-of-fortune-bg-2.webp')`,\n        }}\n      ></div>\n    </>\n  )\n}\n\nconst Wheel = (props) => {\n  const { players } = props\n\n  useEffect(() => {\n    function createWheel() {\n      const keys = Object.keys(players)\n      const segments = !keys.length\n        ? [\n            {\n              fillStyle: \"#ff0000\",\n              textFillStyle: \"#ff0000\",\n              text: \"\",\n            },\n          ]\n        : keys.map((uniqueId, index) => {\n            const player = players[uniqueId]\n            return {\n              id: player.uniqueId,\n              text: player.uniqueId,\n              name: player.nickname || \"\",\n              fillStyle: index % 2 === 0 ? \"#ff0000\" : \"#ffffff\",\n              textFillStyle: index % 2 === 0 ? \"#ffffff\" : \"#ff0000\",\n              image: player.profilePictureUrl,\n            }\n          })\n      window.wheel = new Winwheel({\n        numSegments: segments.length,\n        responsive: true,\n        innerRadius: (size / 2) * 0.08,\n        outerRadius: (size / 2) * 0.725,\n        centerY: (size / 2) * 0.9,\n        centerX: size / 2,\n        textFontSize: (size / 2) * 0.07,\n        lineWidth: 1,\n        segments: segments,\n        animation: {\n          type: \"spinToStop\",\n          easing: \"Power2.easeOut\",\n          duration: 30,\n          spins: 30,\n          // callbackSound: \"window.wheelSoundTrigger()\",\n          soundTrigger: \"pin\",\n          callbackFinished: \"window.wheelFinished()\",\n        },\n        pins: {\n          number: segments.length,\n          responsive: true,\n          outerRadius: 0,\n        },\n      })\n      window.wheel.rotationAngle = 0\n      window.wheel.draw()\n    }\n\n    createWheel()\n\n    return () => {\n      try {\n        window.wheel.stopAnimation(false)\n      } catch (e) {}\n      window.wheel = null\n    }\n  }, [players])\n\n  return (\n    <canvas\n      className={style.wheelCanvas}\n      id=\"canvas\"\n      width={size}\n      height={size}\n    >\n      Canvas not supported, use another browser.\n    </canvas>\n  )\n}\n\nconst Winner = (props) => {\n  const { info, duration } = props\n  const [isShow, setShow] = useState(true)\n\n  function onAnimationEnd(e) {\n    const target = e.target\n    target.classList.remove(\"animate__zoomInDown\")\n    setTimeout(() => {\n      target.classList.add(\"animate__fadeOut\")\n      target.removeEventListener(\"animationend\", onAnimationEnd)\n      target.addEventListener(\"animationend\", () => {\n        setShow(false)\n      })\n    }, duration * 1000)\n  }\n  return (\n    isShow && (\n      <div\n        className=\"animate__animated animate__zoomInDown h-100 text-center d-flex flex-column justify-content-center align-items-center\"\n        style={{ marginTop: \"-40px\" }}\n        onAnimationEnd={onAnimationEnd}\n      >\n        <span\n          className=\"fw-bolder fs-4 text-info\"\n          style={{\n            textShadow:\n              \"2px 2px 0 #ffffff, 2px -2px 0 #ffffff, -2px 2px 0 #ffffff, -2px -2px 0 #ffffff, 2px 0px 0 #ffffff, 0px 2px 0 #ffffff, -2px 0px 0 #ffffff, 0px -2px 0 #ffffff\",\n          }}\n        >\n          WINNER\n        </span>\n        <img\n          className=\"d-block rounded-circle mx-auto border border-5 border-info\"\n          width=\"150\"\n          height=\"150\"\n          alt=\"winner\"\n          src={info.image}\n          onError={window.imageOnError}\n        />\n        <span\n          className=\"fw-bolder fs-4 text-info lh-1\"\n          style={{\n            textShadow:\n              \"2px 2px 0 #ffffff, 2px -2px 0 #ffffff, -2px 2px 0 #ffffff, -2px -2px 0 #ffffff, 2px 0px 0 #ffffff, 0px 2px 0 #ffffff, -2px 0px 0 #ffffff, 0px -2px 0 #ffffff\",\n          }}\n        >\n          {info.name}\n          <br />\n          <small className=\"fs-6\">{info.text}</small>\n        </span>\n      </div>\n    )\n  )\n}\n\nconst TutorialCard = ({ settings, playerCount, show }) => {\n  const O = {\n    \"bạn bè\": settings.friend,\n    \"người theo dõi\": settings.follower,\n    \"chưa theo dõi\": settings.unfollower,\n  }\n  const players = []\n  for (const key in O) {\n    O[key] && players.push(key)\n  }\n  return (\n    <div\n      style={{ fontSize: \".8rem\", width: \"85%\" }}\n      className={\n        \"bg-light border border-1 text-dark text-start p-2 rounded-5 mx-auto animate__animated \" +\n        (show ? \"animate__flipInX\" : \"animate__flipOutX\")\n      }\n    >\n      <p className=\"mb-0 text-nowrap\">- Người chơi: {players.join(\" / \")}</p>\n      <p className=\"mb-0 text-nowrap\">\n        - Điều kiện:{\" \"}\n        {settings.joinEvent === \"chat\" ? (\n          <>\n            comment nội dung\n            <span className=\"text-danger ms-2\">{settings.commentKey}</span>\n          </>\n        ) : (\n          settings.joinEvent === \"gift\" && (\n            <>\n              tặng tối thiểu combo\n              <span className=\"text-danger ms-2\">\n                {settings.giftCount} {settings.giftName}\n              </span>\n            </>\n          )\n        )}\n      </p>\n      <p className=\"mb-0 text-nowrap\">\n        - Đã tham gia: {playerCount + \" / \" + settings.maxPlayer}\n      </p>\n    </div>\n  )\n}\n\nconst JoinedPlayer = ({ players, show }) => {\n  const container = document.getElementById(\"joined-players\")\n\n  const handleAnimationEnd = (e) => {\n    e.target.classList.remove(\"animate__backInUp\", \"opacity-100\")\n    setTimeout(() => {\n      e.target.classList.add(\"animate__zoomOut\")\n    }, 3000)\n    e.target.onanimationend = e.target.remove\n  }\n\n  useEffect(() => {\n    const lastPlayer = Object.values(players).pop()\n    const image = window.document.createElement(\"img\")\n    image.src = window.imageUrlFixing(\n      lastPlayer?.profilePictureUrl || window.defaultAvatar\n    )\n    image.className =\n      \"position-absolute start-0 top-0 rounded-circle rounded-circle border border-light border-5 opacity-100 animate__animated animate__slow animate__backInUp\"\n    image.setAttribute(\"width\", 80)\n    image.setAttribute(\"height\", 80)\n    image.onanimationend = handleAnimationEnd\n    image.style.marginLeft = window.randomInt(0, 320) + \"px\"\n    image.style.marginTop = window.randomInt(0, 320) + \"px\"\n\n    lastPlayer &&\n      setTimeout(() => {\n        container.appendChild(image)\n      }, window.randomInt(100, 500))\n  }, [players])\n\n  return (\n    <div\n      className={\n        \"position-relative \" + (!show && \"animate__animated animate__zoomOut\")\n      }\n      id=\"joined-players\"\n    ></div>\n  )\n}\n\nfunction WheelofFortune({ event, settings }) {\n  const [setting_1, updateSettings] = useState(defaultSettings)\n  const [players, setPlayers] = useState({})\n  const [canJoin, setCanjoin] = useState(true)\n  const [winner, setWinner] = useState(false)\n  const [isSpining, setIsSpining] = useState(false)\n\n  function startSpin() {\n    if (Object.keys(players).length < 2 || isSpining) return\n    window.wheel.rotationAngle = Math.floor(Math.random() * 359) + 1\n    window.wheel.draw()\n    window.wheel.startAnimation()\n    setCanjoin(false)\n    setWinner(false)\n    setIsSpining(true)\n  }\n\n  function resetWheel() {\n    try {\n      window.wheel.stopAnimation(false)\n    } catch (e) {}\n    window.wheel.rotationAngle = 0\n    window.wheel.draw()\n    setPlayers({})\n    setIsSpining(false)\n    setCanjoin(true)\n    setWinner(false)\n  }\n\n  useEffect(() => {\n    settings && updateSettings(settings)\n  }, [settings])\n\n  useEffect(() => {\n    const validFollowrRole = {\n      0: setting_1.unfollower,\n      1: setting_1.follower,\n      2: setting_1.friend,\n    }\n\n    const { name, uniqueId, nickname, profilePictureUrl, followRole } = event\n\n    if (name === \"spin\") return startSpin()\n    if (name === \"restart\") return resetWheel()\n    setPlayers((current) => {\n      // if (!window.cid) return demoPlayer\n\n      const isLimit = Object.keys(current).length >= setting_1.maxPlayer\n      if (isLimit || !canJoin) return current\n\n      const isJoined = current[uniqueId]\n      if (\n        isJoined ||\n        name !== setting_1.joinEvent ||\n        !validFollowrRole[followRole]\n      )\n        return current\n\n      var valid\n      switch (name) {\n        case \"chat\":\n          const { comment } = event\n          valid = comment && comment.includes(setting_1.commentKey)\n          break\n        case \"gift\":\n          const { giftType, giftName, repeatCount, repeatEnd } = event\n          if (giftType === 1 && !repeatEnd) break\n          valid =\n            giftName === setting_1.giftName && repeatCount < setting_1.giftCount\n          break\n        default:\n      }\n      return valid\n        ? { ...current, [uniqueId]: { uniqueId, nickname, profilePictureUrl } }\n        : current\n    })\n  }, [event, canJoin, setting_1])\n\n  useEffect(() => {\n    window.wheelFinished = () => {\n      let winningSegment = window.wheel.getIndicatedSegment()\n      setWinner(winningSegment.id ? winningSegment : false)\n      setIsSpining(false)\n      console.warn(winningSegment.text, \"is winner\")\n    }\n    return () => {\n      window.wheelFinished = null\n    }\n  }, [])\n\n  return (\n    <div\n      className=\"position-relative mx-auto p-2\"\n      style={{ width: `${size}px`, height: `${size}px` }}\n    >\n      <TutorialCard\n        settings={setting_1}\n        playerCount={Object.keys(players).length}\n        show={canJoin}\n      />\n      <div\n        className=\"position-absolute w-100 text-center\"\n        style={{ zIndex: \"1\" }}\n      >\n        <JoinedPlayer players={players} show={canJoin} />\n      </div>\n      <div className=\"position-absolute  \">\n        <Wheel players={players} />\n      </div>\n      <div className=\"position-absolute w-100 h-100\">\n        <WheelBackground />\n      </div>\n      <div className=\"position-absolute w-100 h-100\">\n        {winner && winner.id && (\n          <Winner info={winner} duration={setting_1.winnerShowDuration || 10} />\n        )}\n      </div>\n    </div>\n  )\n}\nexport default memo(WheelofFortune)\n","import React, { useState, useEffect, useRef } from \"react\"\nimport {\n  MDBSpinner,\n  MDBInputGroup,\n  MDBBtn,\n  MDBIcon,\n  MDBCard,\n  MDBCardHeader,\n  MDBCardBody,\n} from \"mdb-react-ui-kit\"\n\nexport default function InputCard({ socket }) {\n  const [isLoading, setLoading] = useState(false)\n  const tiktokIdRef = useRef(null)\n  const btnRef = useRef(null)\n\n  function start() {\n    tiktokIdRef.current.setAttribute(\"disabled\", true)\n    btnRef.current.setAttribute(\"disabled\", true)\n    const id = tiktokIdRef.current.value\n    socket.emit(\"createRoom\", id)\n    window.localStorage.setItem(\"lastTiktokId\", id)\n    setLoading(true)\n  }\n\n  useEffect(() => {\n    return tiktokIdRef.current.focus()\n  })\n\n  useEffect(() => {\n    socket.on(\"tiktok-connectSuccess\", () => {\n      window.toast.success(`Connected successfully!`)\n      setLoading(false)\n    })\n\n    socket.on(\"tiktok-connectFailed\", (error) => {\n      tiktokIdRef.current.removeAttribute(\"disabled\")\n      btnRef.current.removeAttribute(\"disabled\")\n      window.toast.error(`${error}`)\n      setLoading(false)\n    })\n\n    socket.on(\"tiktok-streamEnd\", (reason) => {\n      tiktokIdRef.current.removeAttribute(\"disabled\")\n      btnRef.current.removeAttribute(\"disabled\")\n      window.toast.info(`Livestream has ended: ${reason}`)\n    })\n\n    return () => {\n      socket.off(\"tiktok-connectSuccess\")\n      socket.off(\"tiktok-connectFailed\")\n      socket.off(\"tiktok-streamEnd\")\n    }\n  }, [])\n\n  return (\n    <>\n      <MDBInputGroup>\n        <input\n          ref={tiktokIdRef}\n          className=\"form-control\"\n          placeholder=\"enter tiktok id\"\n          type=\"text\"\n          defaultValue={window.localStorage.lastTiktokId}\n        />\n        <MDBBtn ref={btnRef} onClick={start} className=\"position-relative\">\n          <span className={isLoading ? \"invisible\" : \"\"}>\n            Kết nối <MDBIcon className=\"ms-1\" fas icon=\"angle-right\" />\n          </span>\n          {isLoading && (\n            <div className=\"position-absolute top-0 bottom-0 start-0 end-0 mx-auto\">\n              <MDBSpinner className=\"my-2\" size=\"sm\">\n                <span className=\"visually-hidden\">Loading...</span>\n              </MDBSpinner>\n            </div>\n          )}\n        </MDBBtn>\n      </MDBInputGroup>\n    </>\n  )\n}\n","import React, { useState, useEffect } from \"react\"\nimport { Link } from \"react-router-dom\"\nimport io from \"socket.io-client\"\nimport \"react-toastify/dist/ReactToastify.css\"\nimport \"./App.css\"\nimport WheelOfFortune from \"./games/wheelOfFortune\"\nimport ConnectCard from \"./components/connectCard\"\nimport {\n  MDBInputGroup,\n  MDBBtn,\n  MDBIcon,\n  MDBRow,\n  MDBCol,\n  MDBCheckbox,\n  MDBRange,\n  MDBRadio,\n  MDBCard,\n  MDBCardHeader,\n  MDBCardBody,\n} from \"mdb-react-ui-kit\"\nconst socket = io({\n  path: \"/socket\",\n})\n\nconst defaultSettings = JSON.stringify({\n  commentKey: \"join\",\n  follower: true,\n  friend: true,\n  giftCount: 1,\n  giftName: \"rose\",\n  joinEvent: \"chat\",\n  maxPlayer: 100,\n  unfollower: true,\n  winnerShowDuration: 10,\n})\n\nconst LoadingPage = () => {\n  return <></>\n}\n\nconst SettingsCard = ({ current, update }) => {\n  function handleChange(e) {\n    const target = e.target\n    const type = target.type\n    const name = target.name\n    var value = target.value\n    switch (type) {\n      case \"radio\":\n        if (\"true false\".includes(value)) {\n          value = value === \"true\"\n        }\n        break\n      case \"checkbox\":\n        value = target.checked\n        break\n      case \"number\":\n      case \"range\":\n        const min = parseInt(target.min)\n        const int = parseInt(value || min)\n        const float = parseFloat(value || min)\n        value = Math.max(min, int, float)\n        target.value = value\n        break\n      case \"text\":\n        break\n      default:\n    }\n    return update((current) => ({ ...current, [name]: value }))\n  }\n\n  return (\n    <div>\n      <MDBRow className=\"mb-3\">\n        <MDBCol size=\"md\" md=\"4\" lg=\"5\">\n          <label>Người chơi</label>\n        </MDBCol>\n        <MDBCol size=\"md\" md=\"8\" lg=\"7\">\n          <MDBCheckbox\n            label=\"Bạn bè\"\n            name=\"friend\"\n            defaultChecked={current[\"friend\"]}\n            onChange={handleChange}\n          />\n          <MDBCheckbox\n            label=\"Người theo dõi\"\n            name=\"follower\"\n            defaultChecked={current[\"follower\"]}\n            onChange={handleChange}\n          />\n          <MDBCheckbox\n            label=\"Người chưa theo dõi\"\n            name=\"unfollower\"\n            defaultChecked={current[\"unfollower\"]}\n            onChange={handleChange}\n          />\n        </MDBCol>\n      </MDBRow>\n      <MDBRow className=\"mb-3\">\n        <MDBCol size=\"md\" md=\"4\" lg=\"5\">\n          <label>Số lượng người chơi</label>\n        </MDBCol>\n        <MDBCol size=\"md\" md=\"8\" lg=\"7\">\n          <MDBRange\n            name=\"maxPlayer\"\n            defaultValue={current[\"maxPlayer\"]}\n            onChange={handleChange}\n            step=\"1\"\n            min=\"2\"\n            max=\"100\"\n            type=\"range\"\n            className=\"form-range\"\n          />\n        </MDBCol>\n      </MDBRow>\n      <MDBRow className=\"mb-3\">\n        <MDBCol size=\"md\" md=\"4\" lg=\"5\">\n          <label>Hành động</label>\n        </MDBCol>\n        <MDBCol size=\"md\" lg=\"7\" className=\"d-flex align-items-center gap-3\">\n          <MDBRadio\n            name=\"joinEvent\"\n            label=\"Comment\"\n            value=\"chat\"\n            defaultChecked={current[\"joinEvent\"] === \"chat\"}\n            onChange={handleChange}\n          />\n          <MDBRadio\n            name=\"joinEvent\"\n            label=\"Tặng quà\"\n            value=\"gift\"\n            defaultChecked={current[\"joinEvent\"] === \"gift\"}\n            onChange={handleChange}\n          />\n        </MDBCol>\n      </MDBRow>\n      {current[\"joinEvent\"] === \"chat\" && (\n        <MDBRow className=\"mb-3\">\n          <MDBCol size=\"md\" md=\"4\" lg=\"5\">\n            <label>Từ khoá comment</label>\n          </MDBCol>\n          <MDBCol size=\"md\" md=\"8\" lg=\"7\">\n            <input\n              name=\"commentKey\"\n              defaultValue={current[\"commentKey\"]}\n              placeholder=\"bất kỳ\"\n              onInput={handleChange}\n              type=\"text\"\n              className=\"form-control\"\n            />\n          </MDBCol>\n        </MDBRow>\n      )}\n      {current[\"joinEvent\"] === \"gift\" && (\n        <MDBRow className=\"mb-3\">\n          <MDBCol size=\"md\" md=\"4\" lg=\"5\">\n            <label>Quà tặng</label>\n          </MDBCol>\n          <MDBCol size=\"md\" md=\"8\" lg=\"7\" className=\"d-flex align-items-center\">\n            <MDBInputGroup>\n              <input\n                name=\"giftCount\"\n                defaultValue={current[\"giftCount\"]}\n                onInput={handleChange}\n                className=\"form-control \"\n                type=\"number\"\n                min=\"1\"\n                step=\"1\"\n              />\n              <select\n                name=\"giftName\"\n                defaultValue={current[\"giftName\"]}\n                onInput={handleChange}\n                className=\"form-control w-75\"\n              >\n                <option value=\"rose\">Hoa Hồng</option>\n                <option value=\"tiktok\">Tiktok</option>\n              </select>\n            </MDBInputGroup>\n          </MDBCol>\n        </MDBRow>\n      )}\n      <MDBRow className=\"mb-3\">\n        <MDBCol size=\"md\" md=\"4\" lg=\"5\">\n          <label>\n            Thời gian hiện người thắng <small>(giây)</small>\n          </label>\n        </MDBCol>\n        <MDBCol size=\"md\" md=\"8\" lg=\"7\">\n          <MDBRange\n            name=\"winnerShowDuration\"\n            defaultValue={current[\"winnerShowDuration\"] || 5}\n            onChange={handleChange}\n            step=\"5\"\n            min=\"5\"\n            max=\"100\"\n            type=\"range\"\n            className=\"form-range\"\n          />\n        </MDBCol>\n      </MDBRow>\n    </div>\n  )\n}\n\nfunction App() {\n  const [isConnected, setIsConnected] = useState(socket.connected)\n  const [event, updateEvent] = useState({})\n  const [settings, updateSettings] = useState(\n    JSON.parse(window.localStorage.settings || defaultSettings)\n  )\n\n  const widgetControl = (action) => {\n    updateEvent({ name: action })\n    socket.emit(\"control\", action)\n  }\n\n  useEffect(() => {\n    socket.on(\"connect\", async () => {\n      setIsConnected(true)\n      console.log(\"socket connected\")\n    })\n\n    socket.on(\"disconnect\", () => {\n      setIsConnected(false)\n    })\n\n    socket.on(\"tiktok-chat\", (data) => {\n      updateEvent(data)\n    })\n\n    socket.on(\"tiktok-gift\", (data) => {\n      updateEvent(data)\n    })\n\n    socket.on(\"tiktok-follow\", (data) => {\n      updateEvent(data)\n    })\n\n    socket.on(\"tiktok-share\", (data) => {\n      updateEvent(data)\n    })\n\n    socket.on(\"tiktok-like\", (data) => {\n      updateEvent(data)\n    })\n\n    socket.on(\"tiktok-streamEnd\", (reason) => {\n      window.toast.info(`Livestream has ended: ${reason}`)\n    })\n\n    return () => {\n      socket.off(\"connect\")\n      socket.off(\"disconnect\")\n      socket.off(\"tiktok-streamEnd\")\n    }\n  }, [])\n\n  useEffect(() => {\n    window.localStorage.setItem(\"settings\", JSON.stringify(settings))\n    clearTimeout(window.saveDelay)\n    window.saveDelay = setTimeout(\n      () => socket.emit(\"updateSettings\", settings),\n      1000\n    )\n  }, [settings])\n\n  useEffect(() => {\n    console.log(event.name, event.uniqueId)\n  }, [event])\n\n  return (\n    <>\n      {!isConnected ? (\n        <LoadingPage />\n      ) : (\n        <>\n          <MDBRow className=\"animate__animated animate__fadeIn\">\n            <h5 className=\"text-light\">Wheel of Fortune</h5>\n            <MDBCol size=\"md\" md=\"12\" lg=\"5\">\n              <MDBCard className=\"mb-3 rounded-7 bg-trans\">\n                <MDBCardHeader className=\"border-0 pb-0\">\n                  <h6 className=\"mb-0\">Kết nối Tiktok</h6>\n                </MDBCardHeader>\n                <MDBCardBody>\n                  <ConnectCard socket={socket} />\n                </MDBCardBody>\n              </MDBCard>\n              <MDBCard className=\"mb-3 rounded-7 bg-trans\">\n                <MDBCardHeader className=\"border-0 pb-0\">\n                  <h6 className=\"mb-0\">Cài đặt</h6>\n                </MDBCardHeader>\n                <MDBCardBody>\n                  <SettingsCard current={settings} update={updateSettings} />\n                </MDBCardBody>\n              </MDBCard>\n              <MDBCard className=\"mb-3 rounded-7 bg-trans\">\n                <MDBCardHeader className=\"border-0 pb-0 \">\n                  <h6 className=\"mb-0\">Hiển thị lên Livestream</h6>\n                </MDBCardHeader>\n                <MDBCardBody>\n                  <p className=\"mb-0\">\n                    Tạo cửa sô{\" \"}\n                    <a href=\"https://obsproject.com/\" target=\"_blank\">\n                      OBS studio\n                    </a>{\" \"}\n                    /{\" \"}\n                    <a\n                      href=\"https://www.tiktok.com/studio/download\"\n                      target=\"_blank\"\n                    >\n                      Livestudio\n                    </a>{\" \"}\n                    nguồn trình duyệt bằng Url bên dưới\n                  </p>\n                  <p\n                    style={{\n                      marginBottom: 0,\n                      overflow: \"hidden\",\n                      textOverflow: \"ellipsis\",\n                      whiteSpace: \"nowrap\",\n                    }}\n                  >\n                    <span>👉 </span>\n                    <a\n                      className=\"text-nowrap\"\n                      href={\n                        window.location.origin +\n                        \"/widget/wheel-of-fortune\" +\n                        \"?cid=\" +\n                        socket.id\n                      }\n                      target=\"_blank\"\n                    >\n                      {window.location.origin +\n                        \"/widget/wheel-of-fortune\" +\n                        \"?cid=\" +\n                        socket.id}\n                    </a>\n                  </p>\n                </MDBCardBody>\n              </MDBCard>\n            </MDBCol>\n            <MDBCol\n              size=\"md\"\n              md=\"12\"\n              lg=\"7\"\n              className=\"overflow-hidden d-flex flex-column align-items-center justify-content-center\"\n            >\n              <div className=\"mb-3\">\n                <div style={{ paddingBottom: \"100px\" }}>\n                  <WheelOfFortune settings={settings} event={event} />\n                </div>\n                <div className=\"text-center text-light\">\n                  Lưu ý: đây là bản xem trước, kết quả không được đồng bộ với\n                  livestream\n                </div>\n              </div>\n              <div className=\"d-flex justify-content-center  align-items-center\">\n                <MDBBtn\n                  color=\"light\"\n                  className=\"text-nowrap\"\n                  onClick={() => widgetControl(\"spin\")}\n                >\n                  Quay <MDBIcon className=\"ms-1\" fas icon=\"play\" />\n                </MDBBtn>\n                <MDBBtn\n                  color=\"light\"\n                  className=\"mx-1 text-nowrap\"\n                  onClick={() => widgetControl(\"restart\")}\n                >\n                  Đặt lại <MDBIcon className=\"ms-1\" fas icon=\"redo\" />\n                </MDBBtn>\n              </div>\n            </MDBCol>\n          </MDBRow>\n        </>\n      )}\n    </>\n  )\n}\n\nexport default App\n"],"sourceRoot":""}