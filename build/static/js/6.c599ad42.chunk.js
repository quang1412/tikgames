(this["webpackJsonpstarter-cra-and-react"]=this["webpackJsonpstarter-cra-and-react"]||[]).push([[6],{52:function(e,t,n){e.exports={html:"style_html__xRU5M",App:"style_App__318US",gameScreen:"style_gameScreen__14i96",wheel:"style_wheel__17HAv",header:"style_header__2tiKQ",info:"style_info__1Cjzb",wheelContainer:"style_wheelContainer__3YLa_",wheelBg:"style_wheelBg__3-dAe",wheelCanvas:"style_wheelCanvas__2rjVB",actions:"style_actions__ZkXv3",modal:"style_modal__2xGNW"}},55:function(e,t,n){"use strict";n.r(t);var a=n(6),i=n(5),o=n(4),r=n(0),l=n.n(r),f=n(52),s=n.n(f),c=n(56),m=n.n(c),u={tiktokId:"",commentKey:"JOIN",follower:!0,friend:!0,giftCount:1,giftName:"rose",joinEvent:"chat",maxPlayer:100,unfollower:!0,winnerShowDuration:10};window.wheelSoundTrigger=function(){return console.log("play sound")};var d=function(){var e=Object(r.useState)(0),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){return a(1-n)}),1e3);return function(){return clearTimeout(e)}}),[n]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:s.a.wheelBg+(n?" d-none":""),style:{backgroundImage:"url('/assets/images/wheel-of-fortune-bg-1.webp')"}}),l.a.createElement("div",{className:s.a.wheelBg+(n?"":" d-none"),style:{backgroundImage:"url('/assets/images/wheel-of-fortune-bg-2.webp')"}}))},w=function(e){var t=e.players;return Object(r.useEffect)((function(){return function(){var e=Object.keys(t),n=e.length?e.map((function(e,n){var a=t[e];return{id:a.uniqueId,text:a.uniqueId,name:a.nickname||"",fillStyle:n%2===0?"#ff0000":"#ffffff",textFillStyle:n%2===0?"#ffffff":"#ff0000",image:a.profilePictureUrl}})):[{fillStyle:"#ff0000",textFillStyle:"#ff0000",text:""}];window.wheel=new m.a({numSegments:n.length,responsive:!0,innerRadius:16,outerRadius:145,centerY:180,centerX:200,textFontSize:200*.07,lineWidth:1,segments:n,animation:{type:"spinToStop",easing:"Power2.easeOut",duration:30,spins:30,soundTrigger:"pin",callbackFinished:"window.wheelFinished()"},pins:{number:n.length,responsive:!0,outerRadius:0}}),window.wheel.rotationAngle=0,window.wheel.draw()}(),function(){try{window.wheel.stopAnimation(!1)}catch(e){}window.wheel=null}}),[t]),l.a.createElement("canvas",{className:s.a.wheelCanvas,id:"canvas",width:400,height:400},"Canvas not supported, use another browser.")},p=function(e){var t=e.info,n=e.duration,a=Object(r.useState)(!0),i=Object(o.a)(a,2),f=i[0],s=i[1];return f&&l.a.createElement("div",{className:"animate__animated animate__zoomInDown h-100 text-center d-flex flex-column justify-content-center align-items-center",style:{marginTop:"-40px"},onAnimationEnd:function e(t){var a=t.target;a.classList.remove("animate__zoomInDown"),setTimeout((function(){a.classList.add("animate__fadeOut"),a.removeEventListener("animationend",e),a.addEventListener("animationend",(function(){s(!1)}))}),1e3*n)}},l.a.createElement("span",{className:"fw-bolder fs-4 text-info",style:{textShadow:"2px 2px 0 #ffffff, 2px -2px 0 #ffffff, -2px 2px 0 #ffffff, -2px -2px 0 #ffffff, 2px 0px 0 #ffffff, 0px 2px 0 #ffffff, -2px 0px 0 #ffffff, 0px -2px 0 #ffffff"}},"WINNER"),l.a.createElement("img",{className:"d-block rounded-circle mx-auto border border-5 border-info",width:"150",height:"150",alt:"winner",src:t.image,onError:window.imageOnError}),l.a.createElement("span",{className:"fw-bolder fs-4 text-info lh-1",style:{textShadow:"2px 2px 0 #ffffff, 2px -2px 0 #ffffff, -2px 2px 0 #ffffff, -2px -2px 0 #ffffff, 2px 0px 0 #ffffff, 0px 2px 0 #ffffff, -2px 0px 0 #ffffff, 0px -2px 0 #ffffff"}},t.name,l.a.createElement("br",null),l.a.createElement("small",{className:"fs-6"},t.text)))},h=function(e){var t=e.settings,n=e.playerCount,a=e.show,i={"b\u1ea1n b\xe8":t.friend,"ng\u01b0\u1eddi theo d\xf5i":t.follower,"ch\u01b0a theo d\xf5i":t.unfollower},o=[];for(var r in i)i[r]&&o.push(r);return l.a.createElement("div",{style:{fontSize:".8rem",width:"85%"},className:"bg-light border border-1 text-dark text-start p-2 rounded-5 mx-auto animate__animated "+(a?"animate__flipInX":"animate__flipOutX")},l.a.createElement("p",{className:"mb-0 text-nowrap"},"- Ng\u01b0\u1eddi ch\u01a1i: ",o.join(" / ")),l.a.createElement("p",{className:"mb-0 text-nowrap"},"- \u0110i\u1ec1u ki\u1ec7n:"," ","chat"===t.joinEvent?l.a.createElement(l.a.Fragment,null,"comment n\u1ed9i dung",l.a.createElement("span",{className:"text-danger ms-2"},t.commentKey)):"gift"===t.joinEvent&&l.a.createElement(l.a.Fragment,null,"t\u1eb7ng t\u1ed1i thi\u1ec3u combo",l.a.createElement("span",{className:"text-danger ms-2"},t.giftCount," ",t.giftName))),l.a.createElement("p",{className:"mb-0 text-nowrap"},"- \u0110\xe3 tham gia: ",n+" / "+t.maxPlayer))},g=function(e){var t=e.players,n=e.show,a=document.getElementById("joined-players"),i=function(e){e.target.classList.remove("animate__backInUp","opacity-100"),setTimeout((function(){e.target.classList.add("animate__zoomOut")}),3e3),e.target.onanimationend=e.target.remove};return Object(r.useEffect)((function(){var e=Object.values(t).pop(),n=window.document.createElement("img");n.src=window.imageUrlFixing((null===e||void 0===e?void 0:e.profilePictureUrl)||window.defaultAvatar),n.className="position-absolute start-0 top-0 rounded-circle rounded-circle border border-light border-5 opacity-100 animate__animated animate__slow animate__backInUp",n.setAttribute("width",80),n.setAttribute("height",80),n.onanimationend=i,n.style.marginLeft=window.randomInt(0,320)+"px",n.style.marginTop=window.randomInt(0,320)+"px",e&&setTimeout((function(){a.appendChild(n)}),window.randomInt(100,500))}),[t]),l.a.createElement("div",{className:"position-relative "+(!n&&"animate__animated animate__zoomOut"),id:"joined-players"})};t.default=Object(r.memo)((function(e){var t=e.event,n=e.settings,f=Object(r.useState)(u),s=Object(o.a)(f,2),c=s[0],m=s[1],b=Object(r.useState)({}),x=Object(o.a)(b,2),_=x[0],v=x[1],y=Object(r.useState)(!0),E=Object(o.a)(y,2),j=E[0],O=E[1],N=Object(r.useState)(!1),S=Object(o.a)(N,2),k=S[0],I=S[1],A=Object(r.useState)(!1),C=Object(o.a)(A,2),F=C[0],T=C[1];return Object(r.useEffect)((function(){n&&m(n)}),[n]),Object(r.useEffect)((function(){var e={0:c.unfollower,1:c.follower,2:c.friend},n=t.name,o=t.uniqueId,r=t.nickname,l=t.profilePictureUrl,f=t.followRole;if("spin"!==n)return"restart"===n?function(){try{window.wheel.stopAnimation(!1)}catch(e){}window.wheel.rotationAngle=0,window.wheel.draw(),v({}),T(!1),O(!0),I(!1)}():void v((function(s){var m;if(Object.keys(s).length>=c.maxPlayer||!j)return s;if(s[o]||n!==c.joinEvent||!e[f])return s;switch(n){case"chat":var u=t.comment;m=u&&u.includes(c.commentKey);break;case"gift":var d=t.giftType,w=t.giftName,p=t.repeatCount,h=t.repeatEnd;if(1===d&&!h)break;m=w===c.giftName&&p<c.giftCount}return m?Object(i.a)(Object(i.a)({},s),{},Object(a.a)({},o,{uniqueId:o,nickname:r,profilePictureUrl:l})):s}));Object.keys(_).length<2||F||(window.wheel.rotationAngle=Math.floor(359*Math.random())+1,window.wheel.draw(),window.wheel.startAnimation(),O(!1),I(!1),T(!0))}),[t,j,c]),Object(r.useEffect)((function(){return window.wheelFinished=function(){var e=window.wheel.getIndicatedSegment();I(!!e.id&&e),T(!1),console.warn(e.text,"is winner")},function(){window.wheelFinished=null}}),[]),l.a.createElement("div",{className:"position-relative mx-auto p-2",style:{width:"".concat(400,"px"),height:"".concat(400,"px")}},l.a.createElement(h,{settings:c,playerCount:Object.keys(_).length,show:j}),l.a.createElement("div",{className:"position-absolute w-100 text-center",style:{zIndex:"1"}},l.a.createElement(g,{players:_,show:j})),l.a.createElement("div",{className:"position-absolute  "},l.a.createElement(w,{players:_})),l.a.createElement("div",{className:"position-absolute w-100 h-100"},l.a.createElement(d,null)),l.a.createElement("div",{className:"position-absolute w-100 h-100"},k&&k.id&&l.a.createElement(p,{info:k,duration:c.winnerShowDuration||10})))}))}}]);
//# sourceMappingURL=6.c599ad42.chunk.js.map