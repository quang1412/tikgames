{"ast":null,"code":"var _jsxFileName = \"/Users/trinhdacquang/React/tikgames/src/games/wheelOfFortune/index.jsx\";\nimport React, { useEffect, useState, memo } from \"react\";\n// import { useOutletContext } from \"react-router-dom\"\nimport style from \"./style.module.css\";\nimport Winwheel from \"winwheel\";\nconst size = 400;\nconst defaultSettings = {\n  tiktokId: \"\",\n  commentKey: \"JOIN\",\n  follower: true,\n  friend: true,\n  giftCount: 1,\n  giftName: \"rose\",\n  joinEvent: \"chat\",\n  maxPlayer: 100,\n  unfollower: true,\n  winnerShowDuration: 10\n};\nwindow.wheelSoundTrigger = () => console.log(\"play sound\");\nconst WheelBackground = () => {\n  const [index, setindex] = useState(0);\n  useEffect(() => {\n    const i = setTimeout(() => setindex(1 - index), 1000);\n    return () => clearTimeout(i);\n  }, [index]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: style.wheelBg + (index ? \" d-none\" : \"\"),\n    style: {\n      backgroundImage: `url('/assets/images/wheel-of-fortune-bg-1.webp')`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: style.wheelBg + (!index ? \" d-none\" : \"\"),\n    style: {\n      backgroundImage: `url('/assets/images/wheel-of-fortune-bg-2.webp')`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }));\n};\nconst Wheel = props => {\n  const {\n    players\n  } = props;\n  useEffect(() => {\n    function createWheel() {\n      const keys = Object.keys(players);\n      const segments = !keys.length ? [{\n        fillStyle: \"#ff0000\",\n        textFillStyle: \"#ff0000\",\n        text: \"\"\n      }] : keys.map((uniqueId, index) => {\n        const player = players[uniqueId];\n        return {\n          id: player.uniqueId,\n          text: player.uniqueId,\n          name: player.nickname || \"\",\n          fillStyle: index % 2 === 0 ? \"#ff0000\" : \"#ffffff\",\n          textFillStyle: index % 2 === 0 ? \"#ffffff\" : \"#ff0000\",\n          image: player.profilePictureUrl\n        };\n      });\n      window.wheel = new Winwheel({\n        numSegments: segments.length,\n        responsive: true,\n        innerRadius: size / 2 * 0.08,\n        outerRadius: size / 2 * 0.725,\n        centerY: size / 2 * 0.9,\n        centerX: size / 2,\n        textFontSize: size / 2 * 0.07,\n        lineWidth: 1,\n        segments: segments,\n        animation: {\n          type: \"spinToStop\",\n          easing: \"Power2.easeOut\",\n          duration: 30,\n          spins: 30,\n          // callbackSound: \"window.wheelSoundTrigger()\",\n          soundTrigger: \"pin\",\n          callbackFinished: \"window.wheelFinished()\"\n        },\n        pins: {\n          number: segments.length,\n          responsive: true,\n          outerRadius: 0\n        }\n      });\n      window.wheel.rotationAngle = 0;\n      window.wheel.draw();\n    }\n    createWheel();\n    return () => {\n      try {\n        window.wheel.stopAnimation(false);\n      } catch (e) {}\n      window.wheel = null;\n    };\n  }, [players]);\n  return /*#__PURE__*/React.createElement(\"canvas\", {\n    className: style.wheelCanvas,\n    id: \"canvas\",\n    width: size,\n    height: size,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }\n  }, \"Canvas not supported, use another browser.\");\n};\nconst Winner = props => {\n  const {\n    info,\n    duration\n  } = props;\n  const [isShow, setShow] = useState(true);\n  function onAnimationEnd(e) {\n    const target = e.target;\n    target.classList.remove(\"animate__zoomInDown\");\n    setTimeout(() => {\n      target.classList.add(\"animate__fadeOut\");\n      target.removeEventListener(\"animationend\", onAnimationEnd);\n      target.addEventListener(\"animationend\", () => {\n        setShow(false);\n      });\n    }, duration * 1000);\n  }\n  return isShow && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"animate__animated animate__zoomInDown h-100 text-center d-flex flex-column justify-content-center align-items-center\",\n    style: {\n      marginTop: \"-40px\"\n    },\n    onAnimationEnd: onAnimationEnd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"fw-bolder fs-4 text-info\",\n    style: {\n      textShadow: \"2px 2px 0 #ffffff, 2px -2px 0 #ffffff, -2px 2px 0 #ffffff, -2px -2px 0 #ffffff, 2px 0px 0 #ffffff, 0px 2px 0 #ffffff, -2px 0px 0 #ffffff, 0px -2px 0 #ffffff\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, \"WINNER\"), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"d-block rounded-circle mx-auto border border-5 border-info\",\n    width: \"150\",\n    height: \"150\",\n    alt: \"winner\",\n    src: info.image,\n    onError: window.imageOnError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"fw-bolder fs-4 text-info lh-1\",\n    style: {\n      textShadow: \"2px 2px 0 #ffffff, 2px -2px 0 #ffffff, -2px 2px 0 #ffffff, -2px -2px 0 #ffffff, 2px 0px 0 #ffffff, 0px 2px 0 #ffffff, -2px 0px 0 #ffffff, 0px -2px 0 #ffffff\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }\n  }, info.name, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    className: \"fs-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, info.text)));\n};\nconst TutorialCard = _ref => {\n  let {\n    settings,\n    playerCount,\n    show\n  } = _ref;\n  const O = {\n    \"bạn bè\": (settings || defaultSettings).friend,\n    \"người theo dõi\": (settings || defaultSettings).follower,\n    \"chưa theo dõi\": (settings || defaultSettings).unfollower\n  };\n  const players = [];\n  for (const key in O) {\n    O[key] && players.push(key);\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      fontSize: \".8rem\",\n      width: \"85%\"\n    },\n    className: \"bg-light border border-1 text-dark text-start p-2 rounded-5 mx-auto animate__animated \" + (show ? \"animate__flipInX\" : \"animate__flipOutX\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-0 text-nowrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, \"- Ng\\u01B0\\u1EDDi ch\\u01A1i: \", players.join(\" / \")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-0 text-nowrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }\n  }, \"- \\u0110i\\u1EC1u ki\\u1EC7n:\", \" \", (settings || defaultSettings).joinEvent === \"chat\" ? /*#__PURE__*/React.createElement(React.Fragment, null, \"comment n\\u1ED9i dung\", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-danger ms-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, (settings || defaultSettings).commentKey)) : (settings || defaultSettings).joinEvent === \"gift\" && /*#__PURE__*/React.createElement(React.Fragment, null, \"t\\u1EB7ng t\\u1ED1i thi\\u1EC3u combo\", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-danger ms-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 15\n    }\n  }, (settings || defaultSettings).giftCount, \" \", (settings || defaultSettings).giftName))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-0 text-nowrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }\n  }, \"- \\u0110\\xE3 tham gia:\", \" \", playerCount + \" / \" + (settings || defaultSettings).maxPlayer));\n};\nconst JoinedPlayer = _ref2 => {\n  let {\n    players,\n    show\n  } = _ref2;\n  const container = document.getElementById(\"joined-players\");\n  const handleAnimationEnd = e => {\n    e.target.classList.remove(\"animate__backInUp\", \"opacity-100\");\n    setTimeout(() => {\n      e.target.classList.add(\"animate__zoomOut\");\n    }, 3000);\n    e.target.onanimationend = e.target.remove;\n  };\n  useEffect(() => {\n    const lastPlayer = Object.values(players).pop();\n    const image = window.document.createElement(\"img\");\n    image.src = window.imageUrlFixing((lastPlayer === null || lastPlayer === void 0 ? void 0 : lastPlayer.profilePictureUrl) || window.defaultAvatar);\n    image.className = \"position-absolute start-0 top-0 rounded-circle rounded-circle border border-light border-5 opacity-100 animate__animated animate__slow animate__backInUp\";\n    image.setAttribute(\"width\", 80);\n    image.setAttribute(\"height\", 80);\n    image.onanimationend = handleAnimationEnd;\n    image.style.marginLeft = window.randomInt(0, 320) + \"px\";\n    image.style.marginTop = window.randomInt(0, 320) + \"px\";\n    lastPlayer && setTimeout(() => {\n      container.appendChild(image);\n    }, window.randomInt(100, 500));\n  }, [players]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position-relative \" + (!show && \"animate__animated animate__zoomOut\"),\n    id: \"joined-players\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 5\n    }\n  });\n};\nfunction WheelofFortune(_ref3) {\n  let {\n    event,\n    settings\n  } = _ref3;\n  const [players, setPlayers] = useState({});\n  const [canJoin, setCanjoin] = useState(true);\n  const [winner, setWinner] = useState(false);\n  const [isSpining, setIsSpining] = useState(false);\n  function startSpin() {\n    if (Object.keys(players).length < 2 || isSpining) return;\n    window.wheel.rotationAngle = Math.floor(Math.random() * 359) + 1;\n    window.wheel.draw();\n    window.wheel.startAnimation();\n    setCanjoin(false);\n    setWinner(false);\n    setIsSpining(true);\n  }\n  function resetWheel() {\n    try {\n      window.wheel.stopAnimation(false);\n    } catch (e) {}\n    window.wheel.rotationAngle = 0;\n    window.wheel.draw();\n    setPlayers({});\n    setIsSpining(false);\n    setCanjoin(true);\n    setWinner(false);\n  }\n  useEffect(() => {\n    const validFollowrRole = {\n      0: (settings || defaultSettings).unfollower,\n      1: (settings || defaultSettings).follower,\n      2: (settings || defaultSettings).friend\n    };\n    const {\n      name,\n      uniqueId,\n      nickname,\n      profilePictureUrl,\n      followRole\n    } = event;\n    if (name === \"spin\") return startSpin();\n    if (name === \"restart\") return resetWheel();\n    setPlayers(current => {\n      // if (!window.cid) return demoPlayer\n\n      const isLimit = Object.keys(current).length >= (settings || defaultSettings).maxPlayer;\n      if (isLimit || !canJoin) return current;\n      const isJoined = current[uniqueId];\n      if (isJoined || name !== (settings || defaultSettings).joinEvent || !validFollowrRole[followRole]) return current;\n      var valid;\n      switch (name) {\n        case \"chat\":\n          const {\n            comment\n          } = event;\n          valid = comment && comment.includes((settings || defaultSettings).commentKey);\n          break;\n        case \"gift\":\n          const {\n            giftType,\n            giftName,\n            repeatCount,\n            repeatEnd\n          } = event;\n          if (giftType === 1 && !repeatEnd) break;\n          valid = giftName === (settings || defaultSettings).giftName && repeatCount < (settings || defaultSettings).giftCount;\n          break;\n        default:\n      }\n      return valid ? {\n        ...current,\n        [uniqueId]: {\n          uniqueId,\n          nickname,\n          profilePictureUrl\n        }\n      } : current;\n    });\n  }, [event, canJoin, settings]);\n  useEffect(() => {\n    window.wheelFinished = () => {\n      let winningSegment = window.wheel.getIndicatedSegment();\n      setWinner(winningSegment.id ? winningSegment : false);\n      setIsSpining(false);\n      console.warn(winningSegment.text, \"is winner\");\n    };\n    return () => {\n      window.wheelFinished = null;\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position-relative mx-auto p-2\",\n    style: {\n      width: `${size}px`,\n      height: `${size}px`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TutorialCard, {\n    settings: settings,\n    playerCount: Object.keys(players).length,\n    show: canJoin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position-absolute w-100 text-center\",\n    style: {\n      zIndex: \"1\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(JoinedPlayer, {\n    players: players,\n    show: canJoin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position-absolute  \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Wheel, {\n    players: players,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position-absolute w-100 h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(WheelBackground, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position-absolute w-100 h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 7\n    }\n  }, winner && winner.id && /*#__PURE__*/React.createElement(Winner, {\n    info: winner,\n    duration: (settings || defaultSettings).winnerShowDuration || 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 11\n    }\n  })));\n}\nexport default memo(WheelofFortune);","map":{"version":3,"names":["React","useEffect","useState","memo","style","Winwheel","size","defaultSettings","tiktokId","commentKey","follower","friend","giftCount","giftName","joinEvent","maxPlayer","unfollower","winnerShowDuration","window","wheelSoundTrigger","console","log","WheelBackground","index","setindex","i","setTimeout","clearTimeout","wheelBg","backgroundImage","Wheel","props","players","createWheel","keys","Object","segments","length","fillStyle","textFillStyle","text","map","uniqueId","player","id","name","nickname","image","profilePictureUrl","wheel","numSegments","responsive","innerRadius","outerRadius","centerY","centerX","textFontSize","lineWidth","animation","type","easing","duration","spins","soundTrigger","callbackFinished","pins","number","rotationAngle","draw","stopAnimation","e","wheelCanvas","Winner","info","isShow","setShow","onAnimationEnd","target","classList","remove","add","removeEventListener","addEventListener","marginTop","textShadow","imageOnError","TutorialCard","settings","playerCount","show","O","key","push","fontSize","width","join","JoinedPlayer","container","document","getElementById","handleAnimationEnd","onanimationend","lastPlayer","values","pop","createElement","src","imageUrlFixing","defaultAvatar","className","setAttribute","marginLeft","randomInt","appendChild","WheelofFortune","event","setPlayers","canJoin","setCanjoin","winner","setWinner","isSpining","setIsSpining","startSpin","Math","floor","random","startAnimation","resetWheel","validFollowrRole","followRole","current","isLimit","isJoined","valid","comment","includes","giftType","repeatCount","repeatEnd","wheelFinished","winningSegment","getIndicatedSegment","warn","height","zIndex"],"sources":["/Users/trinhdacquang/React/tikgames/src/games/wheelOfFortune/index.jsx"],"sourcesContent":["import React, { useEffect, useState, memo } from \"react\"\n// import { useOutletContext } from \"react-router-dom\"\nimport style from \"./style.module.css\"\nimport Winwheel from \"winwheel\"\nconst size = 400\nconst defaultSettings = {\n  tiktokId: \"\",\n  commentKey: \"JOIN\",\n  follower: true,\n  friend: true,\n  giftCount: 1,\n  giftName: \"rose\",\n  joinEvent: \"chat\",\n  maxPlayer: 100,\n  unfollower: true,\n  winnerShowDuration: 10,\n}\n\nwindow.wheelSoundTrigger = () => console.log(\"play sound\")\n\nconst WheelBackground = () => {\n  const [index, setindex] = useState(0)\n\n  useEffect(() => {\n    const i = setTimeout(() => setindex(1 - index), 1000)\n    return () => clearTimeout(i)\n  }, [index])\n\n  return (\n    <>\n      <div\n        className={style.wheelBg + (index ? \" d-none\" : \"\")}\n        style={{\n          backgroundImage: `url('/assets/images/wheel-of-fortune-bg-1.webp')`,\n        }}\n      ></div>\n      <div\n        className={style.wheelBg + (!index ? \" d-none\" : \"\")}\n        style={{\n          backgroundImage: `url('/assets/images/wheel-of-fortune-bg-2.webp')`,\n        }}\n      ></div>\n    </>\n  )\n}\n\nconst Wheel = (props) => {\n  const { players } = props\n\n  useEffect(() => {\n    function createWheel() {\n      const keys = Object.keys(players)\n      const segments = !keys.length\n        ? [\n            {\n              fillStyle: \"#ff0000\",\n              textFillStyle: \"#ff0000\",\n              text: \"\",\n            },\n          ]\n        : keys.map((uniqueId, index) => {\n            const player = players[uniqueId]\n            return {\n              id: player.uniqueId,\n              text: player.uniqueId,\n              name: player.nickname || \"\",\n              fillStyle: index % 2 === 0 ? \"#ff0000\" : \"#ffffff\",\n              textFillStyle: index % 2 === 0 ? \"#ffffff\" : \"#ff0000\",\n              image: player.profilePictureUrl,\n            }\n          })\n      window.wheel = new Winwheel({\n        numSegments: segments.length,\n        responsive: true,\n        innerRadius: (size / 2) * 0.08,\n        outerRadius: (size / 2) * 0.725,\n        centerY: (size / 2) * 0.9,\n        centerX: size / 2,\n        textFontSize: (size / 2) * 0.07,\n        lineWidth: 1,\n        segments: segments,\n        animation: {\n          type: \"spinToStop\",\n          easing: \"Power2.easeOut\",\n          duration: 30,\n          spins: 30,\n          // callbackSound: \"window.wheelSoundTrigger()\",\n          soundTrigger: \"pin\",\n          callbackFinished: \"window.wheelFinished()\",\n        },\n        pins: {\n          number: segments.length,\n          responsive: true,\n          outerRadius: 0,\n        },\n      })\n      window.wheel.rotationAngle = 0\n      window.wheel.draw()\n    }\n\n    createWheel()\n\n    return () => {\n      try {\n        window.wheel.stopAnimation(false)\n      } catch (e) {}\n      window.wheel = null\n    }\n  }, [players])\n\n  return (\n    <canvas\n      className={style.wheelCanvas}\n      id=\"canvas\"\n      width={size}\n      height={size}\n    >\n      Canvas not supported, use another browser.\n    </canvas>\n  )\n}\n\nconst Winner = (props) => {\n  const { info, duration } = props\n  const [isShow, setShow] = useState(true)\n\n  function onAnimationEnd(e) {\n    const target = e.target\n    target.classList.remove(\"animate__zoomInDown\")\n    setTimeout(() => {\n      target.classList.add(\"animate__fadeOut\")\n      target.removeEventListener(\"animationend\", onAnimationEnd)\n      target.addEventListener(\"animationend\", () => {\n        setShow(false)\n      })\n    }, duration * 1000)\n  }\n  return (\n    isShow && (\n      <div\n        className=\"animate__animated animate__zoomInDown h-100 text-center d-flex flex-column justify-content-center align-items-center\"\n        style={{ marginTop: \"-40px\" }}\n        onAnimationEnd={onAnimationEnd}\n      >\n        <span\n          className=\"fw-bolder fs-4 text-info\"\n          style={{\n            textShadow:\n              \"2px 2px 0 #ffffff, 2px -2px 0 #ffffff, -2px 2px 0 #ffffff, -2px -2px 0 #ffffff, 2px 0px 0 #ffffff, 0px 2px 0 #ffffff, -2px 0px 0 #ffffff, 0px -2px 0 #ffffff\",\n          }}\n        >\n          WINNER\n        </span>\n        <img\n          className=\"d-block rounded-circle mx-auto border border-5 border-info\"\n          width=\"150\"\n          height=\"150\"\n          alt=\"winner\"\n          src={info.image}\n          onError={window.imageOnError}\n        />\n        <span\n          className=\"fw-bolder fs-4 text-info lh-1\"\n          style={{\n            textShadow:\n              \"2px 2px 0 #ffffff, 2px -2px 0 #ffffff, -2px 2px 0 #ffffff, -2px -2px 0 #ffffff, 2px 0px 0 #ffffff, 0px 2px 0 #ffffff, -2px 0px 0 #ffffff, 0px -2px 0 #ffffff\",\n          }}\n        >\n          {info.name}\n          <br />\n          <small className=\"fs-6\">{info.text}</small>\n        </span>\n      </div>\n    )\n  )\n}\n\nconst TutorialCard = ({ settings, playerCount, show }) => {\n  const O = {\n    \"bạn bè\": (settings || defaultSettings).friend,\n    \"người theo dõi\": (settings || defaultSettings).follower,\n    \"chưa theo dõi\": (settings || defaultSettings).unfollower,\n  }\n  const players = []\n  for (const key in O) {\n    O[key] && players.push(key)\n  }\n  return (\n    <div\n      style={{ fontSize: \".8rem\", width: \"85%\" }}\n      className={\n        \"bg-light border border-1 text-dark text-start p-2 rounded-5 mx-auto animate__animated \" +\n        (show ? \"animate__flipInX\" : \"animate__flipOutX\")\n      }\n    >\n      <p className=\"mb-0 text-nowrap\">- Người chơi: {players.join(\" / \")}</p>\n      <p className=\"mb-0 text-nowrap\">\n        - Điều kiện:{\" \"}\n        {(settings || defaultSettings).joinEvent === \"chat\" ? (\n          <>\n            comment nội dung\n            <span className=\"text-danger ms-2\">\n              {(settings || defaultSettings).commentKey}\n            </span>\n          </>\n        ) : (\n          (settings || defaultSettings).joinEvent === \"gift\" && (\n            <>\n              tặng tối thiểu combo\n              <span className=\"text-danger ms-2\">\n                {(settings || defaultSettings).giftCount}{\" \"}\n                {(settings || defaultSettings).giftName}\n              </span>\n            </>\n          )\n        )}\n      </p>\n      <p className=\"mb-0 text-nowrap\">\n        - Đã tham gia:{\" \"}\n        {playerCount + \" / \" + (settings || defaultSettings).maxPlayer}\n      </p>\n    </div>\n  )\n}\n\nconst JoinedPlayer = ({ players, show }) => {\n  const container = document.getElementById(\"joined-players\")\n\n  const handleAnimationEnd = (e) => {\n    e.target.classList.remove(\"animate__backInUp\", \"opacity-100\")\n    setTimeout(() => {\n      e.target.classList.add(\"animate__zoomOut\")\n    }, 3000)\n    e.target.onanimationend = e.target.remove\n  }\n\n  useEffect(() => {\n    const lastPlayer = Object.values(players).pop()\n    const image = window.document.createElement(\"img\")\n    image.src = window.imageUrlFixing(\n      lastPlayer?.profilePictureUrl || window.defaultAvatar\n    )\n    image.className =\n      \"position-absolute start-0 top-0 rounded-circle rounded-circle border border-light border-5 opacity-100 animate__animated animate__slow animate__backInUp\"\n    image.setAttribute(\"width\", 80)\n    image.setAttribute(\"height\", 80)\n    image.onanimationend = handleAnimationEnd\n    image.style.marginLeft = window.randomInt(0, 320) + \"px\"\n    image.style.marginTop = window.randomInt(0, 320) + \"px\"\n\n    lastPlayer &&\n      setTimeout(() => {\n        container.appendChild(image)\n      }, window.randomInt(100, 500))\n  }, [players])\n\n  return (\n    <div\n      className={\n        \"position-relative \" + (!show && \"animate__animated animate__zoomOut\")\n      }\n      id=\"joined-players\"\n    ></div>\n  )\n}\n\nfunction WheelofFortune({ event, settings }) {\n  const [players, setPlayers] = useState({})\n  const [canJoin, setCanjoin] = useState(true)\n  const [winner, setWinner] = useState(false)\n  const [isSpining, setIsSpining] = useState(false)\n\n  function startSpin() {\n    if (Object.keys(players).length < 2 || isSpining) return\n    window.wheel.rotationAngle = Math.floor(Math.random() * 359) + 1\n    window.wheel.draw()\n    window.wheel.startAnimation()\n    setCanjoin(false)\n    setWinner(false)\n    setIsSpining(true)\n  }\n\n  function resetWheel() {\n    try {\n      window.wheel.stopAnimation(false)\n    } catch (e) {}\n    window.wheel.rotationAngle = 0\n    window.wheel.draw()\n    setPlayers({})\n    setIsSpining(false)\n    setCanjoin(true)\n    setWinner(false)\n  }\n\n  useEffect(() => {\n    const validFollowrRole = {\n      0: (settings || defaultSettings).unfollower,\n      1: (settings || defaultSettings).follower,\n      2: (settings || defaultSettings).friend,\n    }\n\n    const { name, uniqueId, nickname, profilePictureUrl, followRole } = event\n\n    if (name === \"spin\") return startSpin()\n    if (name === \"restart\") return resetWheel()\n    setPlayers((current) => {\n      // if (!window.cid) return demoPlayer\n\n      const isLimit =\n        Object.keys(current).length >= (settings || defaultSettings).maxPlayer\n      if (isLimit || !canJoin) return current\n\n      const isJoined = current[uniqueId]\n      if (\n        isJoined ||\n        name !== (settings || defaultSettings).joinEvent ||\n        !validFollowrRole[followRole]\n      )\n        return current\n\n      var valid\n      switch (name) {\n        case \"chat\":\n          const { comment } = event\n          valid =\n            comment &&\n            comment.includes((settings || defaultSettings).commentKey)\n          break\n        case \"gift\":\n          const { giftType, giftName, repeatCount, repeatEnd } = event\n          if (giftType === 1 && !repeatEnd) break\n          valid =\n            giftName === (settings || defaultSettings).giftName &&\n            repeatCount < (settings || defaultSettings).giftCount\n          break\n        default:\n      }\n      return valid\n        ? { ...current, [uniqueId]: { uniqueId, nickname, profilePictureUrl } }\n        : current\n    })\n  }, [event, canJoin, settings])\n\n  useEffect(() => {\n    window.wheelFinished = () => {\n      let winningSegment = window.wheel.getIndicatedSegment()\n      setWinner(winningSegment.id ? winningSegment : false)\n      setIsSpining(false)\n      console.warn(winningSegment.text, \"is winner\")\n    }\n    return () => {\n      window.wheelFinished = null\n    }\n  }, [])\n\n  return (\n    <div\n      className=\"position-relative mx-auto p-2\"\n      style={{ width: `${size}px`, height: `${size}px` }}\n    >\n      <TutorialCard\n        settings={settings}\n        playerCount={Object.keys(players).length}\n        show={canJoin}\n      />\n      <div\n        className=\"position-absolute w-100 text-center\"\n        style={{ zIndex: \"1\" }}\n      >\n        <JoinedPlayer players={players} show={canJoin} />\n      </div>\n      <div className=\"position-absolute  \">\n        <Wheel players={players} />\n      </div>\n      <div className=\"position-absolute w-100 h-100\">\n        <WheelBackground />\n      </div>\n      <div className=\"position-absolute w-100 h-100\">\n        {winner && winner.id && (\n          <Winner\n            info={winner}\n            duration={(settings || defaultSettings).winnerShowDuration || 10}\n          />\n        )}\n      </div>\n    </div>\n  )\n}\nexport default memo(WheelofFortune)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}