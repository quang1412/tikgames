{"ast":null,"code":"var _jsxFileName = \"/Users/trinhdacquang/React/tikgames/src/App.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport io from \"socket.io-client\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"./App.css\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport { MDBContainer, MDBInputGroup, MDBBtn, MDBIcon } from \"mdb-react-ui-kit\";\nconst socket = io({\n  path: \"/socket\"\n});\nconst LoadingPage = () => {\n  return /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 10\n    }\n  }, \"connecting...\");\n};\nconst ControlPage = _ref => {\n  let {\n    event\n  } = _ref;\n  useEffect(() => {}, [event]);\n  const tiktokId = useRef(null);\n  const startBtn = useRef(null);\n  function start() {\n    tiktokId.current.setAttribute(\"disabled\", true);\n    startBtn.current.setAttribute(\"disabled\", true);\n    const id = tiktokId.current.value;\n    socket.emit(\"createRoom\", id);\n  }\n  useEffect(() => {\n    socket.on(\"tiktok-connectSuccess\", () => {\n      toast.success(`connect success`);\n    });\n    socket.on(\"tiktok-connectFailed\", error => {\n      tiktokId.current.removeAttribute(\"disabled\");\n      startBtn.current.removeAttribute(\"disabled\");\n      toast.error(`connect failed - ${error}`);\n    });\n    socket.on(\"tiktok-streamEnd\", reason => {\n      tiktokId.current.removeAttribute(\"disabled\");\n      startBtn.current.removeAttribute(\"disabled\");\n      toast.info(`livestream ended - ${reason}`);\n    });\n    tiktokId.current.focus();\n    return () => {\n      socket.off(\"tiktok-connectSuccess\");\n      socket.off(\"tiktok-connectFailed\");\n      socket.off(\"tiktok-streamEnd\");\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(MDBContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, \"controller\"), /*#__PURE__*/React.createElement(MDBInputGroup, {\n    className: \"mb-3\",\n    style: {\n      maxWidth: \"300px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: tiktokId,\n    className: \"form-control\",\n    placeholder: \"enter tiktok id\",\n    type: \"text\",\n    defaultValue: \"dienbo94\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(MDBBtn, {\n    ref: startBtn,\n    onClick: start,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, \"Start \", /*#__PURE__*/React.createElement(MDBIcon, {\n    fas: true,\n    icon: \"angle-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, event.name), /*#__PURE__*/React.createElement(ToastContainer, {\n    theme: \"light\",\n    position: \"bottom-right\",\n    toastStyle: {\n      fontSize: \"14px\",\n      textAlign: \"left\"\n    },\n    hideProgressBar: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }));\n};\nfunction App() {\n  const [isConnected, setIsConnected] = useState(socket.connected);\n  const [event, updateEvent] = useState({});\n  useEffect(() => {\n    socket.on(\"connect\", async () => {\n      setIsConnected(true);\n      console.log(\"socket connected\");\n    });\n    socket.on(\"disconnect\", () => {\n      setIsConnected(false);\n    });\n    socket.on(\"tiktok-chat\", data => {\n      updateEvent(data);\n    });\n    socket.on(\"tiktok-gift\", data => {\n      updateEvent(data);\n    });\n    socket.on(\"tiktok-follow\", data => {\n      updateEvent(data);\n    });\n    socket.on(\"tiktok-share\", data => {\n      updateEvent(data);\n    });\n    socket.on(\"tiktok-like\", data => {\n      updateEvent(data);\n    });\n    return () => {\n      socket.off(\"connect\");\n      socket.off(\"disconnect\");\n    };\n  }, []);\n  useEffect(() => {\n    console.log(event.name, event.uniqueId);\n  }, [event]);\n  return /*#__PURE__*/React.createElement(MDBContainer, {\n    className: \"pt-4 vh-100 text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }\n  }, !isConnected ? /*#__PURE__*/React.createElement(LoadingPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 23\n    }\n  }) : /*#__PURE__*/React.createElement(ControlPage, {\n    event: event,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 41\n    }\n  }));\n}\nexport default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","io","ToastContainer","toast","MDBContainer","MDBInputGroup","MDBBtn","MDBIcon","socket","path","LoadingPage","ControlPage","event","tiktokId","startBtn","start","current","setAttribute","id","value","emit","on","success","error","removeAttribute","reason","info","focus","off","maxWidth","name","fontSize","textAlign","App","isConnected","setIsConnected","connected","updateEvent","console","log","data","uniqueId"],"sources":["/Users/trinhdacquang/React/tikgames/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\"\n\nimport io from \"socket.io-client\"\nimport \"react-toastify/dist/ReactToastify.css\"\nimport \"./App.css\"\nimport { ToastContainer, toast } from \"react-toastify\"\nimport { MDBContainer, MDBInputGroup, MDBBtn, MDBIcon } from \"mdb-react-ui-kit\"\n\nconst socket = io({\n  path: \"/socket\",\n})\n\nconst LoadingPage = () => {\n  return <h5>connecting...</h5>\n}\n\nconst ControlPage = ({ event }) => {\n  useEffect(() => {}, [event])\n  const tiktokId = useRef(null)\n  const startBtn = useRef(null)\n\n  function start() {\n    tiktokId.current.setAttribute(\"disabled\", true)\n    startBtn.current.setAttribute(\"disabled\", true)\n    const id = tiktokId.current.value\n    socket.emit(\"createRoom\", id)\n  }\n\n  useEffect(() => {\n    socket.on(\"tiktok-connectSuccess\", () => {\n      toast.success(`connect success`)\n    })\n\n    socket.on(\"tiktok-connectFailed\", (error) => {\n      tiktokId.current.removeAttribute(\"disabled\")\n      startBtn.current.removeAttribute(\"disabled\")\n      toast.error(`connect failed - ${error}`)\n    })\n\n    socket.on(\"tiktok-streamEnd\", (reason) => {\n      tiktokId.current.removeAttribute(\"disabled\")\n      startBtn.current.removeAttribute(\"disabled\")\n      toast.info(`livestream ended - ${reason}`)\n    })\n\n    tiktokId.current.focus()\n\n    return () => {\n      socket.off(\"tiktok-connectSuccess\")\n      socket.off(\"tiktok-connectFailed\")\n      socket.off(\"tiktok-streamEnd\")\n    }\n  }, [])\n\n  return (\n    <MDBContainer>\n      <h5>controller</h5>\n      <MDBInputGroup className=\"mb-3\" style={{ maxWidth: \"300px\" }}>\n        <input\n          ref={tiktokId}\n          className=\"form-control\"\n          placeholder=\"enter tiktok id\"\n          type=\"text\"\n          defaultValue=\"dienbo94\"\n        />\n        <MDBBtn ref={startBtn} onClick={start}>\n          Start <MDBIcon fas icon=\"angle-right\" />\n        </MDBBtn>\n      </MDBInputGroup>\n      <span>{event.name}</span>\n      <ToastContainer\n        theme=\"light\"\n        position=\"bottom-right\"\n        toastStyle={{\n          fontSize: \"14px\",\n          textAlign: \"left\",\n        }}\n        hideProgressBar={false}\n      />\n    </MDBContainer>\n  )\n}\n\nfunction App() {\n  const [isConnected, setIsConnected] = useState(socket.connected)\n  const [event, updateEvent] = useState({})\n\n  useEffect(() => {\n    socket.on(\"connect\", async () => {\n      setIsConnected(true)\n      console.log(\"socket connected\")\n    })\n\n    socket.on(\"disconnect\", () => {\n      setIsConnected(false)\n    })\n\n    socket.on(\"tiktok-chat\", (data) => {\n      updateEvent(data)\n    })\n\n    socket.on(\"tiktok-gift\", (data) => {\n      updateEvent(data)\n    })\n\n    socket.on(\"tiktok-follow\", (data) => {\n      updateEvent(data)\n    })\n\n    socket.on(\"tiktok-share\", (data) => {\n      updateEvent(data)\n    })\n\n    socket.on(\"tiktok-like\", (data) => {\n      updateEvent(data)\n    })\n\n    return () => {\n      socket.off(\"connect\")\n      socket.off(\"disconnect\")\n    }\n  }, [])\n\n  useEffect(() => {\n    console.log(event.name, event.uniqueId)\n  }, [event])\n\n  return (\n    <MDBContainer className=\"pt-4 vh-100 text-left\">\n      {!isConnected ? <LoadingPage /> : <ControlPage event={event} />}\n    </MDBContainer>\n  )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}