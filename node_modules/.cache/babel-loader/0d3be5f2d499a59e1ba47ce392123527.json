{"ast":null,"code":"import _slicedToArray from\"/Users/trinhdacquang/React/tikgames/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import io from\"socket.io-client\";import\"./style.module.css\";import{Outlet}from\"react-router-dom\";var socket=io(\"/widget\",{path:\"/socket\",query:{cid:new URLSearchParams(document.location.search).get(\"cid\")}});export default function Widget(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),event=_useState2[0],setEvent=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),settings=_useState4[0],updateSettings=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isConnected=_useState6[0],setIsConnected=_useState6[1];useEffect(function(){socket.on(\"connect\",function(){return setIsConnected(true);});socket.on(\"disconnect\",function(){return setIsConnected(false);});socket.on(\"updateSettings\",function(data){return updateSettings(data);});socket.on(\"control\",function(action){return setEvent({name:action});});socket.on(\"tiktok-gift\",function(data){return setEvent(data);});socket.on(\"tiktok-chat\",function(data){return setEvent(data);});socket.on(\"tiktok-like\",function(data){return setEvent(data);});socket.on(\"tiktok-share\",function(data){return setEvent(data);});socket.on(\"tiktok-follow\",function(data){return setEvent(data);});return function(){socket.off(\"connect\");socket.off(\"disconnect\");socket.off(\"uodateSettings\");socket.off(\"tiktok-gift\");socket.off(\"tiktok-follow\");socket.off(\"tiktok-share\");socket.off(\"tiktok-like\");socket.off(\"tiktok-chat\");};},[]);return isConnected?/*#__PURE__*/React.createElement(Outlet,{context:[event,settings]}):/*#__PURE__*/React.createElement(\"h5\",null,\"server connecting...\");}","map":{"version":3,"names":["React","useState","useEffect","io","Outlet","socket","path","query","cid","URLSearchParams","document","location","search","get","Widget","event","setEvent","settings","updateSettings","isConnected","setIsConnected","on","data","action","name","off"],"sources":["/Users/trinhdacquang/React/tikgames/src/widgetPage/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport io from \"socket.io-client\"\nimport \"./style.module.css\"\n\nimport { Outlet } from \"react-router-dom\"\nconst socket = io(\"/widget\", {\n  path: \"/socket\",\n  query: {\n    cid: new URLSearchParams(document.location.search).get(\"cid\"),\n  },\n})\n\nexport default function Widget() {\n  const [event, setEvent] = useState({})\n  const [settings, updateSettings] = useState({})\n  const [isConnected, setIsConnected] = useState(false)\n\n  useEffect(() => {\n    socket.on(\"connect\", () => setIsConnected(true))\n    socket.on(\"disconnect\", () => setIsConnected(false))\n\n    socket.on(\"updateSettings\", (data) => updateSettings(data))\n    socket.on(\"control\", (action) => setEvent({ name: action }))\n\n    socket.on(\"tiktok-gift\", (data) => setEvent(data))\n    socket.on(\"tiktok-chat\", (data) => setEvent(data))\n    socket.on(\"tiktok-like\", (data) => setEvent(data))\n    socket.on(\"tiktok-share\", (data) => setEvent(data))\n    socket.on(\"tiktok-follow\", (data) => setEvent(data))\n\n    return () => {\n      socket.off(\"connect\")\n      socket.off(\"disconnect\")\n      socket.off(\"uodateSettings\")\n      socket.off(\"tiktok-gift\")\n      socket.off(\"tiktok-follow\")\n      socket.off(\"tiktok-share\")\n      socket.off(\"tiktok-like\")\n      socket.off(\"tiktok-chat\")\n    }\n  }, [])\n\n  return isConnected ? (\n    <Outlet context={[event, settings]} />\n  ) : (\n    <h5>server connecting...</h5>\n  )\n}\n"],"mappings":"sHAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAOC,GAAE,KAAM,kBAAkB,CACjC,MAAO,oBAAoB,CAE3B,OAASC,MAAM,KAAQ,kBAAkB,CACzC,GAAMC,OAAM,CAAGF,EAAE,CAAC,SAAS,CAAE,CAC3BG,IAAI,CAAE,SAAS,CACfC,KAAK,CAAE,CACLC,GAAG,CAAE,GAAIC,gBAAe,CAACC,QAAQ,CAACC,QAAQ,CAACC,MAAM,CAAC,CAACC,GAAG,CAAC,KAAK,CAC9D,CACF,CAAC,CAAC,CAEF,cAAe,SAASC,OAAM,EAAG,CAC/B,cAA0Bb,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAA/Bc,KAAK,eAAEC,QAAQ,eACtB,eAAmCf,QAAQ,CAAC,CAAC,CAAC,CAAC,yCAAxCgB,QAAQ,eAAEC,cAAc,eAC/B,eAAsCjB,QAAQ,CAAC,KAAK,CAAC,yCAA9CkB,WAAW,eAAEC,cAAc,eAElClB,SAAS,CAAC,UAAM,CACdG,MAAM,CAACgB,EAAE,CAAC,SAAS,CAAE,iBAAMD,eAAc,CAAC,IAAI,CAAC,GAAC,CAChDf,MAAM,CAACgB,EAAE,CAAC,YAAY,CAAE,iBAAMD,eAAc,CAAC,KAAK,CAAC,GAAC,CAEpDf,MAAM,CAACgB,EAAE,CAAC,gBAAgB,CAAE,SAACC,IAAI,QAAKJ,eAAc,CAACI,IAAI,CAAC,GAAC,CAC3DjB,MAAM,CAACgB,EAAE,CAAC,SAAS,CAAE,SAACE,MAAM,QAAKP,SAAQ,CAAC,CAAEQ,IAAI,CAAED,MAAO,CAAC,CAAC,GAAC,CAE5DlB,MAAM,CAACgB,EAAE,CAAC,aAAa,CAAE,SAACC,IAAI,QAAKN,SAAQ,CAACM,IAAI,CAAC,GAAC,CAClDjB,MAAM,CAACgB,EAAE,CAAC,aAAa,CAAE,SAACC,IAAI,QAAKN,SAAQ,CAACM,IAAI,CAAC,GAAC,CAClDjB,MAAM,CAACgB,EAAE,CAAC,aAAa,CAAE,SAACC,IAAI,QAAKN,SAAQ,CAACM,IAAI,CAAC,GAAC,CAClDjB,MAAM,CAACgB,EAAE,CAAC,cAAc,CAAE,SAACC,IAAI,QAAKN,SAAQ,CAACM,IAAI,CAAC,GAAC,CACnDjB,MAAM,CAACgB,EAAE,CAAC,eAAe,CAAE,SAACC,IAAI,QAAKN,SAAQ,CAACM,IAAI,CAAC,GAAC,CAEpD,MAAO,WAAM,CACXjB,MAAM,CAACoB,GAAG,CAAC,SAAS,CAAC,CACrBpB,MAAM,CAACoB,GAAG,CAAC,YAAY,CAAC,CACxBpB,MAAM,CAACoB,GAAG,CAAC,gBAAgB,CAAC,CAC5BpB,MAAM,CAACoB,GAAG,CAAC,aAAa,CAAC,CACzBpB,MAAM,CAACoB,GAAG,CAAC,eAAe,CAAC,CAC3BpB,MAAM,CAACoB,GAAG,CAAC,cAAc,CAAC,CAC1BpB,MAAM,CAACoB,GAAG,CAAC,aAAa,CAAC,CACzBpB,MAAM,CAACoB,GAAG,CAAC,aAAa,CAAC,CAC3B,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,MAAON,YAAW,cAChB,oBAAC,MAAM,EAAC,OAAO,CAAE,CAACJ,KAAK,CAAEE,QAAQ,CAAE,EAAG,cAEtC,qDACD,CACH"},"metadata":{},"sourceType":"module"}