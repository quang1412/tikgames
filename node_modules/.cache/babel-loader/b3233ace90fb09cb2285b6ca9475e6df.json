{"ast":null,"code":"import _slicedToArray from\"/Users/trinhdacquang/React/tikgames/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import{MDBSpinner,MDBInputGroup,MDBBtn,MDBIcon,MDBCard,MDBCardHeader,MDBCardBody}from\"mdb-react-ui-kit\";export default function InputCard(_ref){var socket=_ref.socket;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var tiktokIdRef=useRef(null);var btnRef=useRef(null);function start(){tiktokIdRef.current.setAttribute(\"disabled\",true);btnRef.current.setAttribute(\"disabled\",true);var id=tiktokIdRef.current.value;socket.emit(\"createRoom\",id);window.localStorage.setItem(\"lastTiktokId\",id);setLoading(true);}useEffect(function(){return tiktokIdRef.current.focus();});useEffect(function(){socket.on(\"tiktok-connectSuccess\",function(){window.toast.success(\"Connected successfully!\");setLoading(false);});socket.on(\"tiktok-connectFailed\",function(error){tiktokIdRef.current.removeAttribute(\"disabled\");btnRef.current.removeAttribute(\"disabled\");window.toast.error(\"\".concat(error));setLoading(false);});socket.on(\"tiktok-streamEnd\",function(reason){tiktokIdRef.current.removeAttribute(\"disabled\");btnRef.current.removeAttribute(\"disabled\");window.toast.info(\"Livestream has ended: \".concat(reason));});return function(){socket.off(\"tiktok-connectSuccess\");socket.off(\"tiktok-connectFailed\");socket.off(\"tiktok-streamEnd\");};},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(MDBInputGroup,null,/*#__PURE__*/React.createElement(\"input\",{ref:tiktokIdRef,className:\"form-control\",placeholder:\"enter tiktok id\",type:\"text\",defaultValue:window.localStorage.lastTiktokId}),/*#__PURE__*/React.createElement(MDBBtn,{ref:btnRef,onClick:start,className:\"position-relative\"},/*#__PURE__*/React.createElement(\"span\",{className:isLoading?\"invisible\":\"\"},\"K\\u1EBFt n\\u1ED1i \",/*#__PURE__*/React.createElement(MDBIcon,{className:\"ms-1\",fas:true,icon:\"angle-right\"})),isLoading&&/*#__PURE__*/React.createElement(\"div\",{className:\"position-absolute top-0 bottom-0 start-0 end-0 mx-auto\"},/*#__PURE__*/React.createElement(MDBSpinner,{className:\"my-2\",size:\"sm\"},/*#__PURE__*/React.createElement(\"span\",{className:\"visually-hidden\"},\"Loading...\"))))));}","map":{"version":3,"names":["React","useState","useEffect","useRef","MDBSpinner","MDBInputGroup","MDBBtn","MDBIcon","MDBCard","MDBCardHeader","MDBCardBody","InputCard","socket","isLoading","setLoading","tiktokIdRef","btnRef","start","current","setAttribute","id","value","emit","window","localStorage","setItem","focus","on","toast","success","error","removeAttribute","reason","info","off","lastTiktokId"],"sources":["/Users/trinhdacquang/React/tikgames/src/components/connectCard.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\"\nimport {\n  MDBSpinner,\n  MDBInputGroup,\n  MDBBtn,\n  MDBIcon,\n  MDBCard,\n  MDBCardHeader,\n  MDBCardBody,\n} from \"mdb-react-ui-kit\"\n\nexport default function InputCard({ socket }) {\n  const [isLoading, setLoading] = useState(false)\n  const tiktokIdRef = useRef(null)\n  const btnRef = useRef(null)\n\n  function start() {\n    tiktokIdRef.current.setAttribute(\"disabled\", true)\n    btnRef.current.setAttribute(\"disabled\", true)\n    const id = tiktokIdRef.current.value\n    socket.emit(\"createRoom\", id)\n    window.localStorage.setItem(\"lastTiktokId\", id)\n    setLoading(true)\n  }\n\n  useEffect(() => {\n    return tiktokIdRef.current.focus()\n  })\n\n  useEffect(() => {\n    socket.on(\"tiktok-connectSuccess\", () => {\n      window.toast.success(`Connected successfully!`)\n      setLoading(false)\n    })\n\n    socket.on(\"tiktok-connectFailed\", (error) => {\n      tiktokIdRef.current.removeAttribute(\"disabled\")\n      btnRef.current.removeAttribute(\"disabled\")\n      window.toast.error(`${error}`)\n      setLoading(false)\n    })\n\n    socket.on(\"tiktok-streamEnd\", (reason) => {\n      tiktokIdRef.current.removeAttribute(\"disabled\")\n      btnRef.current.removeAttribute(\"disabled\")\n      window.toast.info(`Livestream has ended: ${reason}`)\n    })\n\n    return () => {\n      socket.off(\"tiktok-connectSuccess\")\n      socket.off(\"tiktok-connectFailed\")\n      socket.off(\"tiktok-streamEnd\")\n    }\n  }, [])\n\n  return (\n    <>\n      <MDBInputGroup>\n        <input\n          ref={tiktokIdRef}\n          className=\"form-control\"\n          placeholder=\"enter tiktok id\"\n          type=\"text\"\n          defaultValue={window.localStorage.lastTiktokId}\n        />\n        <MDBBtn ref={btnRef} onClick={start} className=\"position-relative\">\n          <span className={isLoading ? \"invisible\" : \"\"}>\n            Kết nối <MDBIcon className=\"ms-1\" fas icon=\"angle-right\" />\n          </span>\n          {isLoading && (\n            <div className=\"position-absolute top-0 bottom-0 start-0 end-0 mx-auto\">\n              <MDBSpinner className=\"my-2\" size=\"sm\">\n                <span className=\"visually-hidden\">Loading...</span>\n              </MDBSpinner>\n            </div>\n          )}\n        </MDBBtn>\n      </MDBInputGroup>\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}