{"ast":null,"code":"var _jsxFileName = \"/Users/trinhdacquang/React/tikgames/src/Widget/index.jsx\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport io from \"socket.io-client\";\nimport Game from \"../Game\";\nconst socket = io.connect(\"/widget\", {\n  path: \"/socket\",\n  query: {\n    cid: \"test\"\n    // cid: new URLSearchParams(document.location.search).get(\"cid\"),\n  }\n});\n\nexport default function Widget() {\n  const [event, setEvent] = useState({});\n  const [settings, updateSettings] = useState({});\n  const [isConnected, setIsConnected] = useState(false);\n  const addListener = () => {\n    socket.on(\"tiktok-gift\", data => {\n      setEvent(data);\n    });\n    socket.on(\"tiktok-chat\", data => {\n      setEvent(data);\n    });\n  };\n  const removeListener = () => {\n    socket.off(\"tiktok-gift\");\n    socket.off(\"tiktok-chat\");\n  };\n  useEffect(() => {\n    socket.on(\"connect\", () => {\n      setIsConnected(true);\n    });\n    socket.on(\"disconnect\", () => {\n      setIsConnected(false);\n    });\n    socket.on(\"uodateSettings\", data => {\n      updateSettings(data);\n    });\n    addListener();\n    return () => {\n      socket.off(\"connect\");\n      socket.off(\"disconnect\");\n      socket.off(\"uodateSettings\");\n      removeListener();\n    };\n  }, []);\n  return isConnected ? /*#__PURE__*/React.createElement(Game, {\n    event: event,\n    settings: settings,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, \"server connecting...\");\n}","map":{"version":3,"names":["React","useState","useEffect","useRef","io","Game","socket","connect","path","query","cid","Widget","event","setEvent","settings","updateSettings","isConnected","setIsConnected","addListener","on","data","removeListener","off"],"sources":["/Users/trinhdacquang/React/tikgames/src/Widget/index.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\"\nimport io from \"socket.io-client\"\nimport Game from \"../Game\"\n\nconst socket = io.connect(\"/widget\", {\n  path: \"/socket\",\n  query: {\n    cid: \"test\",\n    // cid: new URLSearchParams(document.location.search).get(\"cid\"),\n  },\n})\n\nexport default function Widget() {\n  const [event, setEvent] = useState({})\n  const [settings, updateSettings] = useState({})\n  const [isConnected, setIsConnected] = useState(false)\n\n  const addListener = () => {\n    socket.on(\"tiktok-gift\", (data) => {\n      setEvent(data)\n    })\n\n    socket.on(\"tiktok-chat\", (data) => {\n      setEvent(data)\n    })\n  }\n  const removeListener = () => {\n    socket.off(\"tiktok-gift\")\n    socket.off(\"tiktok-chat\")\n  }\n\n  useEffect(() => {\n    socket.on(\"connect\", () => {\n      setIsConnected(true)\n    })\n    socket.on(\"disconnect\", () => {\n      setIsConnected(false)\n    })\n    socket.on(\"uodateSettings\", (data) => {\n      updateSettings(data)\n    })\n    addListener()\n\n    return () => {\n      socket.off(\"connect\")\n      socket.off(\"disconnect\")\n      socket.off(\"uodateSettings\")\n      removeListener()\n    }\n  }, [])\n\n  return isConnected ? (\n    <Game event={event} settings={settings} />\n  ) : (\n    <h5>server connecting...</h5>\n  )\n}\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,EAAE,MAAM,kBAAkB;AACjC,OAAOC,IAAI,MAAM,SAAS;AAE1B,MAAMC,MAAM,GAAGF,EAAE,CAACG,OAAO,CAAC,SAAS,EAAE;EACnCC,IAAI,EAAE,SAAS;EACfC,KAAK,EAAE;IACLC,GAAG,EAAE;IACL;EACF;AACF,CAAC,CAAC;;AAEF,eAAe,SAASC,MAAM,GAAG;EAC/B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,CAAC,CAAC,CAAC;EACtC,MAAM,CAACa,QAAQ,EAAEC,cAAc,CAAC,GAAGd,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACe,WAAW,EAAEC,cAAc,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EAErD,MAAMiB,WAAW,GAAG,MAAM;IACxBZ,MAAM,CAACa,EAAE,CAAC,aAAa,EAAGC,IAAI,IAAK;MACjCP,QAAQ,CAACO,IAAI,CAAC;IAChB,CAAC,CAAC;IAEFd,MAAM,CAACa,EAAE,CAAC,aAAa,EAAGC,IAAI,IAAK;MACjCP,QAAQ,CAACO,IAAI,CAAC;IAChB,CAAC,CAAC;EACJ,CAAC;EACD,MAAMC,cAAc,GAAG,MAAM;IAC3Bf,MAAM,CAACgB,GAAG,CAAC,aAAa,CAAC;IACzBhB,MAAM,CAACgB,GAAG,CAAC,aAAa,CAAC;EAC3B,CAAC;EAEDpB,SAAS,CAAC,MAAM;IACdI,MAAM,CAACa,EAAE,CAAC,SAAS,EAAE,MAAM;MACzBF,cAAc,CAAC,IAAI,CAAC;IACtB,CAAC,CAAC;IACFX,MAAM,CAACa,EAAE,CAAC,YAAY,EAAE,MAAM;MAC5BF,cAAc,CAAC,KAAK,CAAC;IACvB,CAAC,CAAC;IACFX,MAAM,CAACa,EAAE,CAAC,gBAAgB,EAAGC,IAAI,IAAK;MACpCL,cAAc,CAACK,IAAI,CAAC;IACtB,CAAC,CAAC;IACFF,WAAW,EAAE;IAEb,OAAO,MAAM;MACXZ,MAAM,CAACgB,GAAG,CAAC,SAAS,CAAC;MACrBhB,MAAM,CAACgB,GAAG,CAAC,YAAY,CAAC;MACxBhB,MAAM,CAACgB,GAAG,CAAC,gBAAgB,CAAC;MAC5BD,cAAc,EAAE;IAClB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOL,WAAW,gBAChB,oBAAC,IAAI;IAAC,KAAK,EAAEJ,KAAM;IAAC,QAAQ,EAAEE,QAAS;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,gBAE1C;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,0BACD;AACH"},"metadata":{},"sourceType":"module"}