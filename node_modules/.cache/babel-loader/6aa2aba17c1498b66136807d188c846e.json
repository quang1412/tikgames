{"ast":null,"code":"var _jsxFileName = \"/Users/trinhdacquang/React/tikgames/src/App.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport io from \"socket.io-client\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"./App.css\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport { MDBContainer, MDBInputGroup, MDBBtn } from \"mdb-react-ui-kit\";\nconst socket = io({\n  path: \"/socket\"\n});\nconst LoadingPage = () => {\n  return /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 10\n    }\n  }, \"connecting...\");\n};\nconst ControlPage = _ref => {\n  let {\n    event\n  } = _ref;\n  useEffect(() => {}, [event]);\n  const tiktokId = useRef(null);\n  function start() {\n    tiktokId.current.setAttribute(\"disabled\", true);\n    const id = tiktokId.current.value;\n    socket.emit(\"createRoom\", id);\n  }\n  useEffect(() => {\n    socket.on(\"tiktok-connectSuccess\", () => {\n      toast.success(`connect success`);\n    });\n    socket.on(\"tiktok-connectFailed\", error => {\n      tiktokId.current.removeAttribute(\"disabled\");\n      toast.error(`connect failed - ${error}`);\n    });\n    return () => {\n      socket.off(\"tiktok-connectFailed\");\n      socket.off(\"tiktok-connectSuccess\");\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(MDBContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, \"controller\"), /*#__PURE__*/React.createElement(MDBInputGroup, {\n    className: \"mb-3\",\n    style: {\n      maxWidth: \"300px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: tiktokId,\n    className: \"form-control\",\n    placeholder: \"enter tiktok id\",\n    type: \"text\",\n    defaultValue: \"dienbo94\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(MDBBtn, {\n    outline: true,\n    onClick: start,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, \"Start\")), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, event.name), /*#__PURE__*/React.createElement(ToastContainer, {\n    theme: \"light\",\n    position: \"bottom-right\",\n    toastStyle: {\n      fontSize: \"14px\",\n      textAlign: \"left\"\n    },\n    hideProgressBar: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }));\n};\nfunction App() {\n  const [isConnected, setIsConnected] = useState(socket.connected);\n  const [event, updateEvent] = useState({});\n  useEffect(() => {\n    socket.on(\"connect\", async () => {\n      setIsConnected(true);\n      console.log(\"socket connected\");\n    });\n    socket.on(\"disconnect\", () => {\n      setIsConnected(false);\n    });\n    socket.on(\"tiktok-chat\", data => {\n      updateEvent(data);\n    });\n    socket.on(\"tiktok-gift\", data => {\n      updateEvent(data);\n    });\n    socket.on(\"tiktok-follow\", data => {\n      updateEvent(data);\n    });\n    socket.on(\"tiktok-share\", data => {\n      updateEvent(data);\n    });\n    socket.on(\"tiktok-like\", data => {\n      updateEvent(data);\n    });\n    return () => {\n      socket.off(\"connect\");\n      socket.off(\"disconnect\");\n    };\n  }, []);\n  useEffect(() => {\n    console.log(event.name, event.uniqueId);\n  }, [event]);\n  return /*#__PURE__*/React.createElement(MDBContainer, {\n    className: \"pt-4 vh-100 text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }\n  }, !isConnected ? /*#__PURE__*/React.createElement(LoadingPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 23\n    }\n  }) : /*#__PURE__*/React.createElement(ControlPage, {\n    event: event,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 41\n    }\n  }));\n}\nexport default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","io","ToastContainer","toast","MDBContainer","MDBInputGroup","MDBBtn","socket","path","LoadingPage","ControlPage","event","tiktokId","start","current","setAttribute","id","value","emit","on","success","error","removeAttribute","off","maxWidth","name","fontSize","textAlign","App","isConnected","setIsConnected","connected","updateEvent","console","log","data","uniqueId"],"sources":["/Users/trinhdacquang/React/tikgames/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\"\n\nimport io from \"socket.io-client\"\nimport \"react-toastify/dist/ReactToastify.css\"\nimport \"./App.css\"\nimport { ToastContainer, toast } from \"react-toastify\"\nimport { MDBContainer, MDBInputGroup, MDBBtn } from \"mdb-react-ui-kit\"\n\nconst socket = io({\n  path: \"/socket\",\n})\n\nconst LoadingPage = () => {\n  return <h5>connecting...</h5>\n}\n\nconst ControlPage = ({ event }) => {\n  useEffect(() => {}, [event])\n  const tiktokId = useRef(null)\n\n  function start() {\n    tiktokId.current.setAttribute(\"disabled\", true)\n    const id = tiktokId.current.value\n    socket.emit(\"createRoom\", id)\n  }\n\n  useEffect(() => {\n    socket.on(\"tiktok-connectSuccess\", () => {\n      toast.success(`connect success`)\n    })\n\n    socket.on(\"tiktok-connectFailed\", (error) => {\n      tiktokId.current.removeAttribute(\"disabled\")\n      toast.error(`connect failed - ${error}`)\n    })\n    return () => {\n      socket.off(\"tiktok-connectFailed\")\n      socket.off(\"tiktok-connectSuccess\")\n    }\n  }, [])\n\n  return (\n    <MDBContainer>\n      <h5>controller</h5>\n      <MDBInputGroup className=\"mb-3\" style={{ maxWidth: \"300px\" }}>\n        <input\n          ref={tiktokId}\n          className=\"form-control\"\n          placeholder=\"enter tiktok id\"\n          type=\"text\"\n          defaultValue=\"dienbo94\"\n        />\n        <MDBBtn outline onClick={start}>\n          Start\n        </MDBBtn>\n      </MDBInputGroup>\n      <span>{event.name}</span>\n      <ToastContainer\n        theme=\"light\"\n        position=\"bottom-right\"\n        toastStyle={{\n          fontSize: \"14px\",\n          textAlign: \"left\",\n        }}\n        hideProgressBar={false}\n      />\n    </MDBContainer>\n  )\n}\n\nfunction App() {\n  const [isConnected, setIsConnected] = useState(socket.connected)\n  const [event, updateEvent] = useState({})\n\n  useEffect(() => {\n    socket.on(\"connect\", async () => {\n      setIsConnected(true)\n      console.log(\"socket connected\")\n    })\n\n    socket.on(\"disconnect\", () => {\n      setIsConnected(false)\n    })\n\n    socket.on(\"tiktok-chat\", (data) => {\n      updateEvent(data)\n    })\n\n    socket.on(\"tiktok-gift\", (data) => {\n      updateEvent(data)\n    })\n\n    socket.on(\"tiktok-follow\", (data) => {\n      updateEvent(data)\n    })\n\n    socket.on(\"tiktok-share\", (data) => {\n      updateEvent(data)\n    })\n\n    socket.on(\"tiktok-like\", (data) => {\n      updateEvent(data)\n    })\n\n    return () => {\n      socket.off(\"connect\")\n      socket.off(\"disconnect\")\n    }\n  }, [])\n\n  useEffect(() => {\n    console.log(event.name, event.uniqueId)\n  }, [event])\n\n  return (\n    <MDBContainer className=\"pt-4 vh-100 text-left\">\n      {!isConnected ? <LoadingPage /> : <ControlPage event={event} />}\n    </MDBContainer>\n  )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}