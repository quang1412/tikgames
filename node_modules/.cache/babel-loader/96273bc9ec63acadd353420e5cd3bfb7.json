{"ast":null,"code":"var _jsxFileName = \"/Users/trinhdacquang/React/tikgames/src/widgetPage/index.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport io from \"socket.io-client\";\nimport Game from \"../Game\";\nimport \"./style.module.css\";\nimport { Outlet } from \"react-router-dom\";\nconst socket = io(\"/widget\", {\n  path: \"/socket\",\n  query: {\n    cid: new URLSearchParams(document.location.search).get(\"cid\")\n  }\n});\nexport default function Widget() {\n  const [event, setEvent] = useState({});\n  const [settings, updateSettings] = useState({});\n  const [isConnected, setIsConnected] = useState(false);\n  const addListener = () => {};\n  const removeListener = () => {};\n  useEffect(() => {\n    socket.on(\"connect\", () => setIsConnected(true));\n    socket.on(\"disconnect\", () => setIsConnected(false));\n    socket.on(\"updateSettings\", data => updateSettings(data));\n    socket.on(\"control\", action => setEvent({\n      name: action\n    }));\n    socket.on(\"tiktok-gift\", data => setEvent(data));\n    socket.on(\"tiktok-chat\", data => setEvent(data));\n    socket.on(\"tiktok-like\", data => setEvent(data));\n    socket.on(\"tiktok-share\", data => setEvent(data));\n    socket.on(\"tiktok-follow\", data => setEvent(data));\n    return () => {\n      socket.off(\"connect\");\n      socket.off(\"disconnect\");\n      socket.off(\"uodateSettings\");\n      socket.off(\"tiktok-gift\");\n      socket.off(\"tiktok-follow\");\n      socket.off(\"tiktok-share\");\n      socket.off(\"tiktok-like\");\n      socket.off(\"tiktok-chat\");\n    };\n  }, []);\n  return isConnected ?\n  /*#__PURE__*/\n  // <Game settings={settings} event={event} />\n  React.createElement(Outlet, {\n    context: [event, settings],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, \"server connecting...\");\n}","map":{"version":3,"names":["React","useState","useEffect","io","Game","Outlet","socket","path","query","cid","URLSearchParams","document","location","search","get","Widget","event","setEvent","settings","updateSettings","isConnected","setIsConnected","addListener","removeListener","on","data","action","name","off"],"sources":["/Users/trinhdacquang/React/tikgames/src/widgetPage/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport io from \"socket.io-client\"\nimport Game from \"../Game\"\nimport \"./style.module.css\"\n\nimport { Outlet } from \"react-router-dom\"\nconst socket = io(\"/widget\", {\n  path: \"/socket\",\n  query: {\n    cid: new URLSearchParams(document.location.search).get(\"cid\"),\n  },\n})\n\nexport default function Widget() {\n  const [event, setEvent] = useState({})\n  const [settings, updateSettings] = useState({})\n  const [isConnected, setIsConnected] = useState(false)\n\n  const addListener = () => {}\n  const removeListener = () => {}\n\n  useEffect(() => {\n    socket.on(\"connect\", () => setIsConnected(true))\n    socket.on(\"disconnect\", () => setIsConnected(false))\n\n    socket.on(\"updateSettings\", (data) => updateSettings(data))\n    socket.on(\"control\", (action) => setEvent({ name: action }))\n\n    socket.on(\"tiktok-gift\", (data) => setEvent(data))\n    socket.on(\"tiktok-chat\", (data) => setEvent(data))\n    socket.on(\"tiktok-like\", (data) => setEvent(data))\n    socket.on(\"tiktok-share\", (data) => setEvent(data))\n    socket.on(\"tiktok-follow\", (data) => setEvent(data))\n\n    return () => {\n      socket.off(\"connect\")\n      socket.off(\"disconnect\")\n      socket.off(\"uodateSettings\")\n      socket.off(\"tiktok-gift\")\n      socket.off(\"tiktok-follow\")\n      socket.off(\"tiktok-share\")\n      socket.off(\"tiktok-like\")\n      socket.off(\"tiktok-chat\")\n    }\n  }, [])\n\n  return isConnected ? (\n    // <Game settings={settings} event={event} />\n    <Outlet context={[event, settings]} />\n  ) : (\n    <h5>server connecting...</h5>\n  )\n}\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,EAAE,MAAM,kBAAkB;AACjC,OAAOC,IAAI,MAAM,SAAS;AAC1B,OAAO,oBAAoB;AAE3B,SAASC,MAAM,QAAQ,kBAAkB;AACzC,MAAMC,MAAM,GAAGH,EAAE,CAAC,SAAS,EAAE;EAC3BI,IAAI,EAAE,SAAS;EACfC,KAAK,EAAE;IACLC,GAAG,EAAE,IAAIC,eAAe,CAACC,QAAQ,CAACC,QAAQ,CAACC,MAAM,CAAC,CAACC,GAAG,CAAC,KAAK;EAC9D;AACF,CAAC,CAAC;AAEF,eAAe,SAASC,MAAM,GAAG;EAC/B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAAC,CAAC,CAAC,CAAC;EACtC,MAAM,CAACiB,QAAQ,EAAEC,cAAc,CAAC,GAAGlB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACmB,WAAW,EAAEC,cAAc,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EAErD,MAAMqB,WAAW,GAAG,MAAM,CAAC,CAAC;EAC5B,MAAMC,cAAc,GAAG,MAAM,CAAC,CAAC;EAE/BrB,SAAS,CAAC,MAAM;IACdI,MAAM,CAACkB,EAAE,CAAC,SAAS,EAAE,MAAMH,cAAc,CAAC,IAAI,CAAC,CAAC;IAChDf,MAAM,CAACkB,EAAE,CAAC,YAAY,EAAE,MAAMH,cAAc,CAAC,KAAK,CAAC,CAAC;IAEpDf,MAAM,CAACkB,EAAE,CAAC,gBAAgB,EAAGC,IAAI,IAAKN,cAAc,CAACM,IAAI,CAAC,CAAC;IAC3DnB,MAAM,CAACkB,EAAE,CAAC,SAAS,EAAGE,MAAM,IAAKT,QAAQ,CAAC;MAAEU,IAAI,EAAED;IAAO,CAAC,CAAC,CAAC;IAE5DpB,MAAM,CAACkB,EAAE,CAAC,aAAa,EAAGC,IAAI,IAAKR,QAAQ,CAACQ,IAAI,CAAC,CAAC;IAClDnB,MAAM,CAACkB,EAAE,CAAC,aAAa,EAAGC,IAAI,IAAKR,QAAQ,CAACQ,IAAI,CAAC,CAAC;IAClDnB,MAAM,CAACkB,EAAE,CAAC,aAAa,EAAGC,IAAI,IAAKR,QAAQ,CAACQ,IAAI,CAAC,CAAC;IAClDnB,MAAM,CAACkB,EAAE,CAAC,cAAc,EAAGC,IAAI,IAAKR,QAAQ,CAACQ,IAAI,CAAC,CAAC;IACnDnB,MAAM,CAACkB,EAAE,CAAC,eAAe,EAAGC,IAAI,IAAKR,QAAQ,CAACQ,IAAI,CAAC,CAAC;IAEpD,OAAO,MAAM;MACXnB,MAAM,CAACsB,GAAG,CAAC,SAAS,CAAC;MACrBtB,MAAM,CAACsB,GAAG,CAAC,YAAY,CAAC;MACxBtB,MAAM,CAACsB,GAAG,CAAC,gBAAgB,CAAC;MAC5BtB,MAAM,CAACsB,GAAG,CAAC,aAAa,CAAC;MACzBtB,MAAM,CAACsB,GAAG,CAAC,eAAe,CAAC;MAC3BtB,MAAM,CAACsB,GAAG,CAAC,cAAc,CAAC;MAC1BtB,MAAM,CAACsB,GAAG,CAAC,aAAa,CAAC;MACzBtB,MAAM,CAACsB,GAAG,CAAC,aAAa,CAAC;IAC3B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOR,WAAW;EAAA;EAChB;EACA,oBAAC,MAAM;IAAC,OAAO,EAAE,CAACJ,KAAK,EAAEE,QAAQ,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,gBAEtC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,0BACD;AACH"},"metadata":{},"sourceType":"module"}